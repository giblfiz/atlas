webpackJsonp([0],{42:function(e,t){"use strict";var n=!0,r={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};e.exports={log:r.log,disableLog:r.disableLog,browserDetails:r.detectBrowser(),extractVersion:r.extractVersion}},211:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(11),u=r(l),d=n(628),f=r(d);n(629),n(817);var p=n(707),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initiate=n.initiate.bind(n),n.initiateLegacyMode=n.initiateLegacyMode.bind(n),n.check=n.check.bind(n),n.handleVideo=n.handleVideo.bind(n),n.handleLoadStart=n.handleLoadStart.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.clearComponent=n.clearComponent.bind(n),n.handleReaderLoad=n.handleReaderLoad.bind(n),n.openImageDialog=n.openImageDialog.bind(n),n.setInterval=n.setInterval.bind(n),n.componentWillUnmount=n.clearComponent,n}return a(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.legacyMode?this.initiateLegacyMode():this.initiate()}},{key:"componentWillReceiveProps",value:function(e){e.legacyMode||this.props.facingMode==e.facingMode?this.props.interval!=e.interval?this.setInterval(e.interval):!this.props.legacyMode&&e.legacyMode?(this.clearComponent(),this.componentDidUpdate=this.initiateLegacyMode):this.props.legacyMode&&!e.legacyMode&&(this.clearComponent(),this.initiate()):(this.clearComponent(),this.initiate())}},{key:"clearComponent",value:function(){this._interval&&clearInterval(this._interval),"function"==typeof this.stopCamera&&this.stopCamera(),this.reader&&(this.reader.removeEventListener("load",this.handleReaderLoad),this.reader=void 0),this.refs.img&&this.refs.img.removeEventListener("load",this.check)}},{key:"initiate",value:function(){var e=this.props,t=e.handleError,n=e.facingMode;p(n).then(function(e){return navigator.mediaDevices.getUserMedia({video:{deviceId:e,facingMode:"rear"==n?"environment":"user",width:{min:360,ideal:1280,max:1920},height:{min:240,ideal:720,max:1080}}})}).then(this.handleVideo).catch(function(e){return t(e.name)})}},{key:"handleVideo",value:function(e){var t=this.refs.preview;window.URL.createObjectURL?t.src=window.URL.createObjectURL(e):window.webkitURL?t.src=window.webkitURL.createObjectURL(e):void 0!==t.mozSrcObject?t.mozSrcObject=e:t.src=e;var n=e.getTracks()[0];this.stopCamera=n.stop.bind(n),t.addEventListener("loadstart",this.handleLoadStart)}},{key:"setInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){this._interval&&clearInterval(this._interval),e!==!1&&(this._interval=setInterval(this.check,e))})},{key:"handleLoadStart",value:function(){var e=this.refs.preview;e.play(),this.setInterval(this.props.interval),e.removeEventListener("loadstart",this.handleLoadStart)}},{key:"check",value:function(){var e=this.props,t=(e.interval,e.handleScan),n=e.legacyMode,r=e.maxImageSize,i=e.handleImageNotRecognized,o=this.refs,a=o.preview,s=o.canvas,c=o.img,l=Math.floor(n?c.naturalWidth:a.videoWidth),u=Math.floor(n?c.naturalHeight:a.videoHeight);if(n)for(var d=1.1;(l>u?l:u)>r;)l=Math.floor(l/d),u=Math.floor(u/d);if(s.width=l,s.height=u,n||a&&a.readyState===a.HAVE_ENOUGH_DATA){var p=s.getContext("2d");p.drawImage(n?c:a,0,0,l,u);var h=p.getImageData(0,0,l,u),v=f.default.decodeQRFromImage(h.data,l,u);v?t(v):n&&i&&i()}}},{key:"initiateLegacyMode",value:function(){this.reader=new FileReader,this.reader.addEventListener("load",this.handleReaderLoad),this.refs.img.addEventListener("load",this.check,!1),this.componentDidUpdate=void 0}},{key:"handleInputChange",value:function(e){this.reader.readAsDataURL(e.target.files[0])}},{key:"handleReaderLoad",value:function(e){this.refs.img.src=e.target.result}},{key:"openImageDialog",value:function(){this.refs.input.click()}},{key:"render",value:function(){var e=s({display:"block",objectFit:"contain"},this.props.previewStyle),t={display:"none"},n=s({display:"none"},this.props.inputStyle);return u.default.createElement("section",null,this.props.legacyMode?u.default.createElement("div",null,u.default.createElement("input",{style:n,id:"react-qr-reader-input",type:"file",accept:"image/*",ref:"input",onChange:this.handleInputChange}),u.default.createElement("img",{style:s({},e,{display:"none"}),ref:"img"})):u.default.createElement("video",{style:e,ref:"preview"}),u.default.createElement("canvas",{style:t,ref:"canvas"}))}}]),t}(l.Component);h.propTypes={handleScan:l.PropTypes.func.isRequired,handleError:l.PropTypes.func.isRequired,handleImageNotRecognized:l.PropTypes.func,interval:l.PropTypes.oneOfType([l.PropTypes.number,l.PropTypes.bool]),previewStyle:l.PropTypes.object,inputStyle:l.PropTypes.object,facingMode:l.PropTypes.string,legacyMode:l.PropTypes.bool,maxImageSize:l.PropTypes.number},h.defaultProps={interval:500,previewStyle:{},inputStyle:{},maxImageSize:1500},t.default=h},222:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(104),o=r(i),a=n(261),s=r(a),c=n(31),l=r(c),u=n(32),d=r(u),f=n(33),p=r(f),h=n(35),v=r(h),m=n(34),g=r(m),w=n(11),y=r(w),_=n(277),b=r(_),C=n(100),M=r(C),T=function(e){function t(){return(0,d.default)(this,t),(0,v.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){window.componentHandler.upgradeElement(this.root)}},{key:"componentWillUnmount",value:function(){window.componentHandler.downgradeElements(this.root)}},{key:"render",value:function(){var e=this,t=this.props,n=t.component,r=t.type,i=t.className,a=t.colored,c=t.to,l=t.href,u=t.primary,d=t.accent,f=t.ripple,p=t.children,h=(0,s.default)(t,["component","type","className","colored","to","href","primary","accent","ripple","children"]);return y.default.createElement(n||(c?M.default:l?"a":"button"),(0,o.default)({ref:function(t){return e.root=t},className:(0,b.default)("mdl-button mdl-js-button",r&&"mdl-button--"+r,{"mdl-button--colored":a,"mdl-button--primary":u,"mdl-button--accent":d,"mdl-js-ripple-effect":f},i),to:c,href:l},h),p)}}]),t}(y.default.Component);T.propTypes={component:w.PropTypes.oneOf([w.PropTypes.string,w.PropTypes.element,w.PropTypes.func]),type:w.PropTypes.oneOf(["raised","fab","mini-fab","icon"]),to:w.PropTypes.oneOf([w.PropTypes.string,w.PropTypes.object]),href:w.PropTypes.string,className:w.PropTypes.string,colored:w.PropTypes.bool,primary:w.PropTypes.bool,accent:w.PropTypes.bool,ripple:w.PropTypes.bool,children:w.PropTypes.node},t.default=T},223:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=r(i),a=n(32),s=r(a),c=n(33),l=r(c),u=n(35),d=r(u),f=n(34),p=r(f),h=n(11),v=r(h),m=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return v.default.createElement("div",null,v.default.createElement("label",null,this.props.label,": ",v.default.createElement("input",{type:"text",value:this.props.value,onChange:this.props.handleValueChange})))}}]),t}(v.default.Component);m.propTypes={label:h.PropTypes.string,value:h.PropTypes.string,handleValueChange:h.PropTypes.func.isRequired},t.default=m},224:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=r(i),a=n(32),s=r(a),c=n(33),l=r(c),u=n(35),d=r(u),f=n(34),p=r(f),h=n(11),v=r(h),m=n(211),g=r(m);console.log("hello world");var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={result:"No result"},n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"handleError",value:function(e){console.error(e)}},{key:"render",value:function(){var e={height:240,width:320};return v.default.createElement("div",null,v.default.createElement(g.default,{previewStyle:e,handleError:this.handleError,handleScan:this.props.handleScan.bind(this)}),v.default.createElement("p",null,this.state.result))}}]),t}(v.default.Component);w.propTypes={height:h.PropTypes.integer,value:h.PropTypes.string,handleScan:h.PropTypes.func.isRequired},t.default=w},226:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=r(i),a=n(32),s=r(a),c=n(33),l=r(c),u=n(35),d=r(u),f=n(34),p=r(f),h=n(11),v=r(h),m=n(212),g=n(149),w=n(119),y=r(w),_=n(223),b=r(_),C=n(222),M=r(C),T=n(224),P=(r(T),n(211)),k=(r(P),n(759)),S=r(k),O=n(827),E=n(279),x=r(E),L=n(218),R=r(L),D=new R.default(new R.default.providers.HttpProvider("http://34.192.3.172:8545")),A=function(e){function t(e){(0,s.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.getOfficerType=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t)var r=n.props.atlas.officer(e);else var r=t.officer(e);var i="";return 1==r?i="Notary":2==r?i="Federal":3==r?i="Judicial":0==r&&(i="Not an officer"),i},n.state={updateManagerAddress:"0xee80b2e89f7cc42e3b433107e989f71858070732",updateManager:{},atlasAddress:"",myAddresses:[],myAddress:"",newParcelName:"Somewhere Lovely",status:"",balance:"",officerType:"Unset Yet",map:void 0,maps:void 0,map_center:[33.678,-116.243],map_zoom:12,north:33.685,south:33.671,east:-116.234,west:-116.251},n.handleChangeUpdateManagerAddress=n.handleChangeUpdateManagerAddress.bind(n),n.handleChangeMyAddresses=n.handleChangeMyAddresses.bind(n),n.handleChangeNorth=n.handleChangeNorth.bind(n),n.handleChangeWest=n.handleChangeWest.bind(n),n.handleChangeSouth=n.handleChangeSouth.bind(n),n.handleChangeEast=n.handleChangeEast.bind(n),n.handleChangeNewParcelName=n.handleChangeNewParcelName.bind(n),n.handleClickCreate=n.handleClickCreate.bind(n),n.handleGoogleApiLoaded=n.handleGoogleApiLoaded.bind(n),n.handleUpdateParcelRect=n.handleUpdateParcelRect.bind(n),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,g.getAtlas)())}},{key:"componentDidMount",value:function(){document.title=O.title}},{key:"componentWillReceiveProps",value:function(e){var t=e.updateManagerAddress,n=e.updateManager,r=e.atlasAddress,i=e.atlas;void 0!==t&&void 0!==n&&void 0!==r&&void 0!==i&&this.setState({myAddresses:D.eth.accounts,myAddress:D.eth.accounts[0],balance:D.fromWei(D.eth.getBalance(D.eth.accounts[0]).toNumber(),"ether"),officerType:this.getOfficerType(D.eth.accounts[0],i)})}},{key:"handleChangeUpdateManagerAddress",value:function(e){this.setState({updateManagerAddress:e.target.value})}},{key:"handleChangeMyAddresses",value:function(e){this.setState({myAddress:e.target.value,balance:D.fromWei(D.eth.getBalance(e.target.value).toNumber(),"ether"),officerType:this.getOfficerType(e.target.value)})}},{key:"handleChangeNorth",value:function(e){this.setState({north:Number(e.target.value)})}},{key:"handleChangeWest",value:function(e){this.setState({west:Number(e.target.value)})}},{key:"handleChangeSouth",value:function(e){this.setState({south:Number(e.target.value)})}},{key:"handleChangeEast",value:function(e){this.setState({east:Number(e.target.value)})}},{key:"handleChangeNewParcelName",value:function(e){this.setState({newParcelName:e.target.value})}},{key:"handleUpdateParcelRect",value:function(){var e=this.state,t=e.north,n=e.south,r=e.east,i=e.west,o=e.map,a=e.maps;this.state.removeRect&&this.state.removeRect();var s=new a.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:o,bounds:{north:t,south:n,east:r,west:i}});this.setState({currentParcelRect:s,removeRect:function(){s.setMap(null)}})}},{key:"handleClickCreate",value:function(){this.props.atlas.createParcel.sendTransaction(Math.round(1e5*parseFloat(this.state.north)).toString(),Math.round(1e5*parseFloat(this.state.west)).toString(),Math.round(1e5*parseFloat(this.state.south)).toString(),Math.round(1e5*parseFloat(this.state.east)).toString(),"0x0",this.state.newParcelName,{from:this.state.myAddress,gas:1e6})}},{key:"handleGoogleApiLoaded",value:function(e){var t=this,n=e.map,r=e.maps;this.setState({map:n,maps:r},function(){t.handleUpdateParcelRect()})}},{key:"render",value:function(){return v.default.createElement(y.default,{className:S.default.content},v.default.createElement("div",{dangerouslySetInnerHTML:{__html:O.html}}),v.default.createElement("label",null,"My Address: ",v.default.createElement("select",{label:"My Addressess",onChange:this.handleChangeMyAddresses},this.state.myAddresses.map(function(e){return v.default.createElement("option",{value:e},e)}))),v.default.createElement("br",null),v.default.createElement("span",null,"Balance (Ether): ",this.state.balance),v.default.createElement("br",null),v.default.createElement("span",null,"Officer Type: ",this.state.officerType),v.default.createElement("hr",null),v.default.createElement("h4",null,"Create a Parcel"),v.default.createElement(b.default,{label:"North",value:this.state.north,handleValueChange:this.handleChangeNorth}),v.default.createElement(b.default,{label:"West",value:this.state.west,handleValueChange:this.handleChangeWest}),v.default.createElement(b.default,{label:"South",value:this.state.south,handleValueChange:this.handleChangeSouth}),v.default.createElement(b.default,{label:"East",value:this.state.east,handleValueChange:this.handleChangeEast}),v.default.createElement(b.default,{label:"New Parcel Name",value:this.state.newParcelName,handleValueChange:this.handleChangeNewParcelName}),v.default.createElement("div",null,v.default.createElement(M.default,{type:"raised",onClick:this.handleUpdateParcelRect},"Update Parcel")),v.default.createElement("div",{style:{width:400,height:400}},v.default.createElement(x.default,{bootstrapURLKeys:{key:"ExGgfDsim8Rukpfc7H6uPCrtvulG_MwSCySazIA".split("").reverse().join("")},center:this.state.map_center,zoom:this.state.map_zoom,draggable:!0,onGoogleApiLoaded:this.handleGoogleApiLoaded})),v.default.createElement("div",null,v.default.createElement(M.default,{type:"raised",onClick:this.handleClickCreate},"Create")))}}]),t}(h.Component);A.propTypes={dispatch:h.PropTypes.func.isRequired,updateManagerAddress:h.PropTypes.string,updateManager:h.PropTypes.object,atlasAddress:h.PropTypes.string};var j=function(e){var t=e.contracts;return t};t.default=(0,m.connect)(j)(A)},227:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=r(i),a=n(32),s=r(a),c=n(33),l=r(c),u=n(35),d=r(u),f=n(34),p=r(f),h=n(11),v=r(h),m=n(212),g=n(149),w=n(119),y=r(w),_=n(223),b=r(_),C=n(222),M=r(C),T=n(224),P=(r(T),n(211)),k=r(P),S=n(762),O=r(S),E=n(829),x=n(279),L=r(x),R=n(218),D=r(R),A=new D.default(new D.default.providers.HttpProvider("http://34.192.3.172:8545")),j=function(e){function t(e){(0,s.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.getOfficerType=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t)var r=n.props.atlas.officer(e);else var r=t.officer(e);var i="";return 1==r?i="Notary":2==r?i="Federal":3==r?i="Judicial":0==r&&(i="Not an officer"),i},n.state={updateManagerAddress:"0xee80b2e89f7cc42e3b433107e989f71858070732",updateManager:{},atlasAddress:"",myAddresses:[],myAddress:"",parcelHash:[],parcelHashActive:"",parcelActive:[],newOwnerHash:"0x0",oldOwnerKey:"",newOwnerName:"Jhonny Appleseed",newParcelName:"Somewhere Lovely",status:"",balance:"",officerType:"Unset Yet",hypoOwnerKey:"",hypoOwnerHash:"",owner_qr_reader:"",map:void 0,maps:void 0,map_center:[33.678,-116.243],map_zoom:12,north:33.685,south:33.671,east:-116.234,west:-116.251},n.handleChangeUpdateManagerAddress=n.handleChangeUpdateManagerAddress.bind(n),n.handleChangeMyAddresses=n.handleChangeMyAddresses.bind(n),n.handleChangeParcelHash=n.handleChangeParcelHash.bind(n),n.handleChangeNewOwnerHash=n.handleChangeNewOwnerHash.bind(n),n.handleChangeOldOwnerKey=n.handleChangeOldOwnerKey.bind(n),n.handleChangeNewOwnerName=n.handleChangeNewOwnerName.bind(n),n.handleClickScanOwnerQrCode=n.handleClickScanOwnerQrCode.bind(n),n.handleScanOwnerKey=n.handleScanOwnerKey.bind(n),n.handleChangeHypoOwnerKey=n.handleChangeHypoOwnerKey.bind(n),n.handleClickTransfer=n.handleClickTransfer.bind(n),n.handleGoogleApiLoaded=n.handleGoogleApiLoaded.bind(n),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,g.getAtlas)())}},{key:"componentDidMount",value:function(){document.title=E.title}},{key:"componentWillReceiveProps",value:function(e){var t=e.updateManagerAddress,n=e.updateManager,r=e.atlasAddress,i=e.atlas;if(void 0!==t&&void 0!==n&&void 0!==r&&void 0!==i){for(var o=[],a=0;a<10;a++)"0x"!==i.parcel_hash_list(a)&&""!=i.parcel_map(i.parcel_hash_list(a))[5]&&o.push({value:i.parcel_hash_list(a),text:i.parcel_map(i.parcel_hash_list(a))[5]});this.setState({parcelHash:o}),this.setState({pacelhashActive:o[0].value,parcelActive:i.parcel_map(o[0].value)}),this.setState({myAddresses:A.eth.accounts,myAddress:A.eth.accounts[0],balance:A.fromWei(A.eth.getBalance(A.eth.accounts[0]).toNumber(),"ether"),officerType:this.getOfficerType(A.eth.accounts[0],i)})}}},{key:"getParcelOwnerString",value:function(e){return e[5]?e[5]+" owner is "+e[4]+" addr: "+e[6]:" "}},{key:"getParcelBoundariesString",value:function(e){return e[5]?"North "+e[0]+", \n\n      West "+e[1]+", \n\n      South "+e[2]+", \n\n      East "+e[3]+" \n":" "}},{key:"handleChangeUpdateManagerAddress",value:function(e){this.setState({updateManagerAddress:e.target.value})}},{key:"handleChangeMyAddresses",value:function(e){this.setState({myAddress:e.target.value,balance:A.fromWei(A.eth.getBalance(e.target.value).toNumber(),"ether"),officerType:this.getOfficerType(e.target.value)})}},{key:"handleChangeParcelHash",value:function(e){var t=this.props.atlas.parcel_map(e.target.value);this.setState({parcelHashActive:e.target.value,parcelActive:t,north:parseFloat(t[0])/1e5,west:parseFloat(t[1])/1e5,south:parseFloat(t[2])/1e5,east:parseFloat(t[3])/1e5}),this.updateParcelRect(parseFloat(t[0])/1e5,parseFloat(t[1])/1e5,parseFloat(t[2])/1e5,parseFloat(t[3])/1e5)}},{key:"handleChangeNewOwnerHash",value:function(e){this.setState({newOwnerHash:e.target.value})}},{key:"handleChangeNewOwnerName",value:function(e){this.setState({newOwnerName:e.target.value})}},{key:"handleChangeOfficerType",value:function(e){this.setState({officerType:e.target.value})}},{key:"handleChangeOldOwnerKey",value:function(e){this.setState({oldOwnerKey:e.target.value})}},{key:"handleChangeHypoOwnerKey",value:function(e){this.setState({hypoOwnerKey:e.target.value,hypoOwnerHash:this.props.atlas.key2Hash.call(e.target.value)})}},{key:"updateParcelRect",value:function(e,t,n,r){console.log("moving rect",this.state.north,this.state.west);var i=this.state,o=i.map,a=i.maps;this.state.removeRect&&this.state.removeRect();var s=new a.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:o,bounds:{north:e,south:n,east:r,west:t}});this.setState({currentParcelRect:s,removeRect:function(){s.setMap(null)}})}},{key:"handleClickTransfer",value:function(){this.props.atlas.transferParcel.sendTransaction(this.state.parcelHashActive,this.state.newOwnerHash,this.state.newOwnerName,this.state.oldOwnerKey,{from:this.state.myAddress,gas:1e6})}},{key:"handleScanOwnerKey",value:function(e){this.setState({oldOwnerKey:e})}},{key:"handleClickScanOwnerQrCode",value:function(){this.setState({owner_qr_reader:v.default.createElement(k.default,{previewStyle:{height:72,width:96},handleError:this.handleError,handleScan:this.handleScanOwnerKey})})}},{key:"handleGoogleApiLoaded",value:function(e){var t=this,n=e.map,r=e.maps;this.setState({map:n,maps:r},function(){t.handleUpdateParcelRect()})}},{key:"render",value:function(){return v.default.createElement(y.default,{className:O.default.content},v.default.createElement("div",{dangerouslySetInnerHTML:{__html:E.html}}),v.default.createElement(b.default,{label:"Atlas Address",value:this.props.atlasAddress}),v.default.createElement("label",null,"My Address: ",v.default.createElement("select",{label:"My Addressess",onChange:this.handleChangeMyAddresses},this.state.myAddresses.map(function(e){return v.default.createElement("option",{value:e},e)}))),v.default.createElement("br",null),v.default.createElement("span",null,"Balance (Ether): ",this.state.balance),v.default.createElement("br",null),v.default.createElement("span",null,"Officer Type: ",this.state.officerType),v.default.createElement("hr",null),v.default.createElement("h4",null,"Transfer a Parcel"),v.default.createElement("label",null,"Parcel: ",v.default.createElement("select",{onChange:this.handleChangeParcelHash},this.state.parcelHash.map(function(e){return v.default.createElement("option",{value:e.value},e.text)})),v.default.createElement("br",null),v.default.createElement("span",null,this.getParcelOwnerString(this.state.parcelActive)),v.default.createElement("br",null),v.default.createElement("span",null,this.getParcelBoundariesString(this.state.parcelActive)),v.default.createElement("br",null)),v.default.createElement(b.default,{label:"New Owner Hash",value:this.state.newOwnerHash,handleValueChange:this.handleChangeNewOwnerHash}),v.default.createElement(b.default,{type:"text",label:"New Owner Name",value:this.state.newOwnerName,handleValueChange:this.handleChangeNewOwnerName}),v.default.createElement(M.default,{type:"raised",onClick:this.handleClickScanOwnerQrCode},"Scan Owner Secret Key"),this.state.owner_qr_reader,v.default.createElement(b.default,{type:"text",label:"Old Owner Key",value:this.state.oldOwnerKey,handleValueChange:this.handleChangeOldOwnerKey}),"(leave owner key blank for Notary/Admin actions)",v.default.createElement("div",null,v.default.createElement(M.default,{type:"raised",onClick:this.handleClickTransfer},"Transfer")),v.default.createElement("div",{style:{width:400,height:400}},v.default.createElement(L.default,{bootstrapURLKeys:{key:"ExGgfDsim8Rukpfc7H6uPCrtvulG_MwSCySazIA".split("").reverse().join("")},center:this.state.map_center,zoom:this.state.map_zoom,draggable:!0,onGoogleApiLoaded:this.handleGoogleApiLoaded})),v.default.createElement("hr",null),v.default.createElement("h4",null,"Ownership Key -> Hash"),v.default.createElement(b.default,{label:"Hypothetical Owner Key",value:this.state.hypoOwnerKey,handleValueChange:this.handleChangeHypoOwnerKey}),v.default.createElement("p",null,"Resulting Owner Hash: ",this.state.hypoOwnerHash))}}]),t}(h.Component);j.propTypes={dispatch:h.PropTypes.func.isRequired,updateManagerAddress:h.PropTypes.string,updateManager:h.PropTypes.object,atlasAddress:h.PropTypes.string};var I=function(e){var t=e.contracts;return t};t.default=(0,m.connect)(I)(j)},278:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(11),u=r(l),d=n(283),f=r(d),p=n(282),h=r(p),v={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},m={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getState=function(){return{children:n.props.dispatcher.getChildren(),updateCounter:n.props.dispatcher.getUpdateCounter()}},n._onChangeHandler=function(){if(n.dimesionsCache_){var e=(n.state.children||[]).length,t=n._getState();n.setState(t,function(){return(t.children||[]).length!==e&&n._onMouseChangeHandler()})}},n._onChildClick=function(){if(n.props.onChildClick&&n.hoverChildProps_){var e=n.hoverKey_,t=n.hoverChildProps_;n.props.onChildClick(e,t)}},n._onChildMouseDown=function(){if(n.props.onChildMouseDown&&n.hoverChildProps_){var e=n.hoverKey_,t=n.hoverChildProps_;n.props.onChildMouseDown(e,t)}},n._onChildMouseEnter=function(e,t){n.dimesionsCache_&&(n.props.onChildMouseEnter&&n.props.onChildMouseEnter(e,t),n.hoverChildProps_=t,n.hoverKey_=e,n.setState({hoverKey:e}))},n._onChildMouseLeave=function(){if(n.dimesionsCache_){var e=n.hoverKey_,t=n.hoverChildProps_;void 0!==e&&null!==e&&(n.props.onChildMouseLeave&&n.props.onChildMouseLeave(e,t),n.hoverKey_=null,n.hoverChildProps_=null,n.setState({hoverKey:null}))}},n._onMouseAllow=function(e){e||n._onChildMouseLeave(),n.allowMouse_=e},n._onMouseChangeHandler=function(){n.allowMouse_&&n._onMouseChangeHandler_raf()},n._onMouseChangeHandler_raf=function(){if(n.dimesionsCache_){var e=n.props.dispatcher.getMousePosition();e?!function(){var t=[],r=n.props.getHoverDistance();if(u.default.Children.forEach(n.state.children,function(i,o){if(i&&(void 0!==i.props.latLng||void 0!==i.props.lat||void 0!==i.props.lng)){var a=void 0!==i.key&&null!==i.key?i.key:o,s=n.props.distanceToMouse(n.dimesionsCache_[a],e,i.props);s<r&&t.push({key:a,dist:s,props:i.props})}}),t.length){t.sort(function(e,t){return e.dist-t.dist});var i=t[0].key,o=t[0].props;n.hoverKey_!==i&&(n._onChildMouseLeave(),n._onChildMouseEnter(i,o))}else n._onChildMouseLeave()}():n._onChildMouseLeave()}},n._getDimensions=function(e){var t=e;return n.dimesionsCache_[t]},n.props.dispatcher.on("kON_CHANGE",n._onChangeHandler),n.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",n._onMouseChangeHandler),n.props.dispatcher.on("kON_CLICK",n._onChildClick),n.props.dispatcher.on("kON_MDOWN",n._onChildMouseDown),n.dimesionsCache_={},n.hoverKey_=null,n.hoverChildProps_=null,n.allowMouse_=!0,n.state=s({},n._getState(),{hoverKey:null}),n}return a(t,e),c(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.experimental===!0?!(0,f.default)(this.props,e)||!(0,f.default)((0,h.default)(this.state,["hoverKey"]),(0,h.default)(t,["hoverKey"])):!(0,f.default)(this.props,e)||!(0,f.default)(this.state,t)}},{key:"componentWillUnmount",value:function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimesionsCache_=null}},{key:"render",value:function(){var e=this,t=this.props.style||v;this.dimesionsCache_={};var n=u.default.Children.map(this.state.children,function(t,n){if(t){if(void 0===t.props.latLng&&void 0===t.props.lat&&void 0===t.props.lng)return u.default.cloneElement(t,{$geoService:e.props.geoService,$onMouseAllow:e._onMouseAllow,$prerender:e.props.prerender});var r=void 0!==t.props.latLng?t.props.latLng:{lat:t.props.lat,lng:t.props.lng},i=e.props.geoService.project(r,e.props.projectFromLeftTop),o={left:i.x,top:i.y},a=0,c=0;e.props.projectFromLeftTop||e.props.geoService.hasSize()&&(a=e.props.geoService.getWidth()/2,c=e.props.geoService.getHeight()/2);var l=void 0!==t.key&&null!==t.key?t.key:n;return e.dimesionsCache_[l]=s({x:i.x+a,y:i.y+c},r),u.default.createElement("div",{key:l,style:s({},m,o),className:t.props.$markerHolderClassName},u.default.cloneElement(t,{$hover:l===e.state.hoverKey,$getDimensions:e._getDimensions,$dimensionKey:l,$geoService:e.props.geoService,$onMouseAllow:e._onMouseAllow,$prerender:e.props.prerender}))}});return u.default.createElement("div",{style:t},n)}}]),t}(l.Component);g.propTypes={geoService:l.PropTypes.any,style:l.PropTypes.any,distanceToMouse:l.PropTypes.func,dispatcher:l.PropTypes.any,onChildClick:l.PropTypes.func,onChildMouseDown:l.PropTypes.func,onChildMouseLeave:l.PropTypes.func,onChildMouseEnter:l.PropTypes.func,getHoverDistance:l.PropTypes.func,projectFromLeftTop:l.PropTypes.bool,prerender:l.PropTypes.bool},g.defaultProps={projectFromLeftTop:!1,prerender:!1},t.default=g},279:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(596),o=r(i);t.default=o.default},280:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(281),a=function(){function e(t,n){if(r(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n}return i(e,[{key:"wrap",value:function(){return new e(this.lat,(0,
o.wrap)(this.lng,-180,180))}}]),e}();a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):"lng"in e&&"lat"in e?new a(e.lat,e.lng):e},t.default=a},281:function(e,t){"use strict";function n(e,t,n){var r=n-t;return e===n?e:((e-t)%r+r)%r+t}Object.defineProperty(t,"__esModule",{value:!0}),t.wrap=n},282:function(e,t){"use strict";function n(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){for(var r=n(e,[]),i=0;i<t.length;i++){var o=t[i];r.hasOwnProperty(o)&&delete r[o]}return r};t.default=r},283:210,284:function(e,t){"use strict";function n(e,t){this.x=e,this.y=t}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e}},591:function(e,t,n){t=e.exports=n(63)(),t.push([e.id,"@media screen and (max-width:1024px){.FeGm{padding:0 16px}}",""]),t.locals={content:"FeGm"}},594:function(e,t,n){t=e.exports=n(63)(),t.push([e.id,"@media screen and (max-width:1024px){._2lPQ{padding:0 16px}}",""]),t.locals={content:"_2lPQ"}},596:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:J}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(11),f=r(d),p=n(291),h=r(p),v=n(283),m=r(v),g=n(599),w=r(g),y=n(597),_=r(y),b=n(278),C=r(b),M=n(598),T=r(M),P=n(607),k=r(P),S=n(601),O=r(S),E=n(603),x=r(E),L=n(600),R=r(L),D=n(605),A=r(D),j=n(609),I=r(j),N=n(610),z=r(N),B=n(608),U=r(B),F=n(604),H=r(F),G=n(282),Z=r(G),V=n(602),K=r(V),W=1e-5,q=256,$=100,Q=300,J=3,Y=function(e){return(0,A.default)(e)?e:{lat:e[0],lng:e[1]}},X=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n._getMinZoom=function(){if(n.geoService_.getWidth()>0||n.geoService_.getHeight()>0){var e=Math.ceil(n.geoService_.getWidth()/q)+2,t=Math.ceil(n.geoService_.getHeight()/q)+2,r=Math.max(e,t);return Math.ceil((0,U.default)(r))}return J},n._computeMinZoom=function(e,t){return e?t||J:n._getMinZoom()},n._mapDomResizeCallback=function(){if(n.resetSizeOnIdle_=!0,n.maps_){var e=n.map_.getCenter();n.maps_.event.trigger(n.map_,"resize"),n.map_.setCenter(e)}},n._setLayers=function(e){e.forEach(function(e){n.layers_[e]=new n.maps_[e],n.layers_[e].setMap(n.map_)})},n._initMap=function(){if(!n.initialized_){n.initialized_=!0;var e=Y(n.props.center||n.props.defaultCenter);n.geoService_.setView(e,n.props.zoom||n.props.defaultZoom,0),n._onBoundsChanged();var t=l({},n.props.apiKey&&{key:n.props.apiKey},n.props.bootstrapURLKeys);n.props.googleMapLoader(t).then(function(e){if(n.mounted_){var t=n.geoService_.getCenter(),r={zoom:n.props.zoom||n.props.defaultZoom,center:new e.LatLng(t.lat,t.lng)},i=(0,I.default)(e,A.default),o="function"==typeof n.props.options?n.props.options(i):n.props.options,a=c(i),s=void 0!==n.props.draggable&&{draggable:n.props.draggable},u=n._computeMinZoom(o.minZoomOverride,o.minZoom);n.minZoom_=u;var d=l({},a,{minZoom:u},o,r);n.defaultDraggableOption_=void 0!==d.draggable?d.draggable:n.defaultDraggableOption_;var p=l({},d,s);p.minZoom=n._checkMinZoom(p.minZoom,u);var v=new e.Map(h.default.findDOMNode(n.refs.google_map_dom),p);n.map_=v,n.maps_=e,n._setLayers(n.props.layerTypes);var m=n,g=n.overlay_=Object.assign(new e.OverlayView,{onAdd:function(){var e="undefined"!=typeof screen?screen.width+"px":"2000px",t="undefined"!=typeof screen?screen.height+"px":"2000px",n=document.createElement("div");this.div=n,n.style.backgroundColor="transparent",n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e,n.style.height=t;var r=this.getPanes();r.overlayMouseTarget.appendChild(n),h.default.unstable_renderSubtreeIntoContainer(m,f.default.createElement(C.default,{experimental:m.props.experimental,onChildClick:m._onChildClick,onChildMouseDown:m._onChildMouseDown,onChildMouseEnter:m._onChildMouseEnter,onChildMouseLeave:m._onChildMouseLeave,geoService:m.geoService_,projectFromLeftTop:!0,distanceToMouse:m.props.distanceToMouse,getHoverDistance:m._getHoverDistance,dispatcher:m.markersDispatcher_}),n,function(){return m.setState({overlayCreated:!0})})},onRemove:function(){h.default.unmountComponentAtNode(this.div)},draw:function(){var t=g.div,n=g.getProjection(),r=v.getBounds(),i=r.getNorthEast(),o=r.getSouthWest(),a=n.fromLatLngToDivPixel(new e.LatLng(i.lat(),o.lng())),s=(0,O.default)().isSafari?{x:Math.round(a.x),y:Math.round(a.y)}:{x:a.x,y:a.y};m.updateCounter_++,m._onBoundsChanged(v,e,!m.props.debounced),m.googleApiLoadedCalled_||(m._onGoogleApiLoaded({map:v,maps:e}),m.googleApiLoadedCalled_=!0),t.style.left=s.x+"px",t.style.top=s.y+"px",m.markersDispatcher_&&m.markersDispatcher_.emit("kON_CHANGE")}});g.setMap(v),e.event.addListener(v,"zoom_changed",function(){if(m.geoService_.getZoom()!==v.getZoom()){m.zoomAnimationInProgress_||(m.zoomAnimationInProgress_=!0,m._onZoomAnimationStart());var t=300;(new Date).getTime()-n.zoomControlClickTime_<t?(0,z.default)(function(){return(0,z.default)(function(){m.updateCounter_++,m._onBoundsChanged(v,e)})}):(m.updateCounter_++,m._onBoundsChanged(v,e))}}),e.event.addListener(v,"idle",function(){if(n.resetSizeOnIdle_){n._setViewSize();var t=n._computeMinZoom(n.props.options.minZoomOverride,n.props.options.minZoom);t!==n.minZoom_&&(n.minZoom_=t,v.setOptions({minZoom:t})),n.resetSizeOnIdle_=!1}m.zoomAnimationInProgress_&&(m.zoomAnimationInProgress_=!1,m._onZoomAnimationEnd());var r=g.div,i=g.getProjection(),o=v.getBounds(),a=o.getNorthEast(),s=o.getSouthWest(),c=i.fromLatLngToDivPixel(new e.LatLng(a.lat(),s.lng())),l=(0,O.default)().isSafari?{x:Math.round(c.x),y:Math.round(c.y)}:{x:c.x,y:c.y};if(m.updateCounter_++,m._onBoundsChanged(v,e),n.mouse_){var u=n.geoService_.unproject(n.mouse_,!0);n.mouse_.lat=u.lat,n.mouse_.lng=u.lng}n._onChildMouseMove(),m.dragTime_=0,r.style.left=l.x+"px",r.style.top=l.y+"px",m.markersDispatcher_&&(m.markersDispatcher_.emit("kON_CHANGE"),m.fireMouseEventOnIdle_&&m.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}),e.event.addListener(v,"mouseover",function(){m.mouseInMap_=!0}),e.event.addListener(v,"mouseout",function(){m.mouseInMap_=!1,m.mouse_=null,m.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),e.event.addListener(v,"drag",function(){m.dragTime_=(new Date).getTime(),m._onDrag()}),e.event.addListener(v,"maptypeid_changed",function(){m._onMapTypeIdChange(v.getMapTypeId())})}}).catch(function(e){throw console.error(e),e})}},n._onGoogleApiLoaded=function(){if(n.props.onGoogleApiLoaded){var e;(e=n.props).onGoogleApiLoaded.apply(e,arguments)}},n._getHoverDistance=function(){return n.props.hoverDistance},n._onDrag=function(){var e;return n.props.onDrag&&(e=n.props).onDrag.apply(e,arguments)},n._onMapTypeIdChange=function(){var e;return n.props.onMapTypeIdChange&&(e=n.props).onMapTypeIdChange.apply(e,arguments)},n._onZoomAnimationStart=function(){var e;return n.props.onZoomAnimationStart&&(e=n.props).onZoomAnimationStart.apply(e,arguments)},n._onZoomAnimationEnd=function(){var e;return n.props.onZoomAnimationEnd&&(e=n.props).onZoomAnimationEnd.apply(e,arguments)},n._onChildClick=function(){if(n.props.onChildClick){var e;return(e=n.props).onChildClick.apply(e,arguments)}},n._onChildMouseDown=function(e,t){n.childMouseDownArgs_=[e,t],n.props.onChildMouseDown&&n.props.onChildMouseDown(e,t,l({},n.mouse_))},n._onChildMouseUp=function(){if(n.childMouseDownArgs_){if(n.props.onChildMouseUp){var e;(e=n.props).onChildMouseUp.apply(e,i(n.childMouseDownArgs_).concat([l({},n.mouse_)]))}n.childMouseDownArgs_=null,n.childMouseUpTime_=(new Date).getTime()}},n._onChildMouseMove=function(){if(n.childMouseDownArgs_&&n.props.onChildMouseMove){var e;(e=n.props).onChildMouseMove.apply(e,i(n.childMouseDownArgs_).concat([l({},n.mouse_)]))}},n._onChildMouseEnter=function(){if(n.props.onChildMouseEnter){var e;return(e=n.props).onChildMouseEnter.apply(e,arguments)}},n._onChildMouseLeave=function(){if(n.props.onChildMouseLeave){var e;return(e=n.props).onChildMouseLeave.apply(e,arguments)}},n._setViewSize=function(){if(n.mounted_){var e=h.default.findDOMNode(n.refs.google_map_dom);n.geoService_.setViewSize(e.clientWidth,e.clientHeight),n._onBoundsChanged()}},n._onWindowResize=function(){n.resetSizeOnIdle_=!0},n._onMapMouseMove=function(e){if(n.mouseInMap_){var t=(new Date).getTime(),r=50;t-n.mouseMoveTime_>r&&(n.boundingRect_=e.currentTarget.getBoundingClientRect()),n.mouseMoveTime_=t;var i=e.clientX-n.boundingRect_.left,o=e.clientY-n.boundingRect_.top;n.mouse_||(n.mouse_={x:0,y:0,lat:0,lng:0}),n.mouse_.x=i,n.mouse_.y=o;var a=n.geoService_.unproject(n.mouse_,!0);n.mouse_.lat=a.lat,n.mouse_.lng=a.lng,n._onChildMouseMove(),t-n.dragTime_<$?n.fireMouseEventOnIdle_=!0:(n.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),n.fireMouseEventOnIdle_=!1)}},n._onClick=function(){var e;return n.props.onClick&&!n.childMouseDownArgs_&&(new Date).getTime()-n.childMouseUpTime_>Q&&0===n.dragTime_&&(e=n.props).onClick.apply(e,arguments)},n._onMapClick=function(e){if(n.markersDispatcher_){n._onMapMouseMove(e);var t=(new Date).getTime();t-n.dragTime_>$&&(n.mouse_&&n._onClick(l({},n.mouse_,{event:e})),n.markersDispatcher_.emit("kON_CLICK",e))}},n._onMapMouseDownNative=function(e){n.mouseInMap_&&n._onMapMouseDown(e)},n._onMapMouseDown=function(e){if(n.markersDispatcher_){var t=(new Date).getTime();t-n.dragTime_>$&&(n._onMapMouseMove(e),n.markersDispatcher_.emit("kON_MDOWN",e))}},n._onMapMouseDownCapture=function(){(0,O.default)().isChrome&&(n.mouse_||(n.zoomControlClickTime_=(new Date).getTime()))},n._onKeyDownCapture=function(){(0,O.default)().isChrome&&(n.zoomControlClickTime_=(new Date).getTime())},n._onTouchMove=function(e){if(n.refs.google_map_dom){var t=h.default.findDOMNode(n.refs.google_map_dom);t.contains(e.target)&&e.preventDefault()}},n._isCenterDefined=function(e){return e&&((0,A.default)(e)&&(0,H.default)(e.lat)&&(0,H.default)(e.lng)||2===e.length&&(0,H.default)(e[0])&&(0,H.default)(e[1]))},n._onBoundsChanged=function(e,t,r){if(e){var i=e.getCenter();n.geoService_.setView([i.lat(),i.lng()],e.getZoom(),0)}if((n.props.onChange||n.props.onBoundsChange)&&n.geoService_.canProject()){var o=n.geoService_.getZoom(),a=n.geoService_.getBounds(),s=n.geoService_.getCenter();if(!(0,R.default)(a,n.prevBounds_,W)&&r!==!1){var c=n.geoService_.getBounds(n.props.margin);n.props.onBoundsChange&&n.props.onBoundsChange(n.centerIsObject_?l({},s):[s.lat,s.lng],o,a,c),n.props.onChange&&n.props.onChange({center:l({},s),zoom:o,bounds:{nw:{lat:a[0],lng:a[1]},se:{lat:a[2],lng:a[3]},sw:{lat:a[4],lng:a[5]},ne:{lat:a[6],lng:a[7]}},marginBounds:{nw:{lat:c[0],lng:c[1]},se:{lat:c[2],lng:c[3]},sw:{lat:c[4],lng:c[5]},ne:{lat:c[6],lng:c[7]}},size:n.geoService_.hasSize()?{width:n.geoService_.getWidth(),height:n.geoService_.getHeight()}:{width:0,height:0}}),n.prevBounds_=a}}},n.mounted_=!1,n.initialized_=!1,n.googleApiLoadedCalled_=!1,n.map_=null,n.maps_=null,n.prevBounds_=null,n.layers_={},n.mouse_=null,n.mouseMoveTime_=0,n.boundingRect_=null,n.mouseInMap_=!0,n.dragTime_=0,n.fireMouseEventOnIdle_=!1,n.updateCounter_=0,n.markersDispatcher_=new w.default(n),n.geoService_=new x.default(q),n.centerIsObject_=(0,A.default)(n.props.center),n.minZoom_=J,n.defaultDraggableOption_=!0,n.zoomControlClickTime_=0,n.childMouseDownArgs_=null,n.childMouseUpTime_=0,n._isCenterDefined(n.props.center||n.props.defaultCenter)){var r=Y(n.props.center||n.props.defaultCenter);n.geoService_.setView(r,n.props.zoom||n.props.defaultZoom,0)}return n.zoomAnimationInProgress_=!1,n.state={overlayCreated:!1},n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted_=!0,window.addEventListener("resize",this._onWindowResize),window.addEventListener("keydown",this._onKeyDownCapture,!0),window.addEventListener("touchmove",this._onTouchMove);var t=h.default.findDOMNode(this.refs.google_map_dom);h.default.findDOMNode(this.refs.google_map_dom).addEventListener("mousedown",this._onMapMouseDownNative,!0),window.addEventListener("mouseup",this._onChildMouseUp,!1);var n=l({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);if(this.props.googleMapLoader(n),setTimeout(function(){e._setViewSize(),e._isCenterDefined(e.props.center||e.props.defaultCenter)&&e._initMap()},0,this),this.props.resetBoundsOnResize){var r=this;K.default.addResizeListener(t,r._mapDomResizeCallback)}}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(!this._isCenterDefined(this.props.center)&&this._isCenterDefined(e.center)&&setTimeout(function(){return t._initMap()},0),this.map_){var n=this.geoService_.getCenter();if(this._isCenterDefined(e.center)){var r=Y(e.center),i=this._isCenterDefined(this.props.center)?Y(this.props.center):null;(!i||Math.abs(r.lat-i.lat)+Math.abs(r.lng-i.lng)>W)&&Math.abs(r.lat-n.lat)+Math.abs(r.lng-n.lng)>W&&this.map_.panTo({lat:r.lat,lng:r.lng})}if(void 0!==e.zoom&&Math.abs(e.zoom-this.props.zoom)>0&&this.map_.setZoom(e.zoom),void 0!==this.props.draggable&&void 0===e.draggable?this.map_.setOptions({draggable:this.defaultDraggableOption_}):this.props.draggable!==e.draggable&&this.map_.setOptions({draggable:e.draggable}),void 0!==e.options&&!(0,m.default)(this.props.options,e.options)){var o=(0,I.default)(this.maps_,A.default),a="function"==typeof e.options?e.options(o):e.options;if(a=(0,Z.default)(a,["zoom","center","draggable"]),a.hasOwnProperty("minZoom")){var s=this._computeMinZoom(a.minZoomOverride,a.minZoom);a.minZoom=this._checkMinZoom(a.minZoom,s)}this.map_.setOptions(a)}if(e.layerTypes!==this.props.layerTypes){var c=!0,l=!1,u=void 0;try{for(var d,f=Object.keys(this.layers_)[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;this.layers_[p].setMap(null),delete this.layers_[p]}}catch(e){l=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(l)throw u}}this._setLayers(e.layerTypes)}}}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,m.default)((0,Z.default)(this.props,["draggable"]),(0,Z.default)(e,["draggable"]))||!(0,m.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){this.markersDispatcher_.emit("kON_CHANGE"),this.props.hoverDistance!==e.hoverDistance&&this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}},{key:"componentWillUnmount",value:function(){this.mounted_=!1;var e=h.default.findDOMNode(this.refs.google_map_dom);window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),e.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("mouseup",this._onChildMouseUp,!1),window.removeEventListener("touchmove",this._onTouchMove),this.props.resetBoundsOnResize&&K.default.removeResizeListener(e,this._mapDomResizeCallback),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.map_=null,this.maps_=null,this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,delete this.map_,delete this.markersDispatcher_}},{key:"_checkMinZoom",value:function(e,t){return t<e?e:t}},{key:"render",value:function(){var e=this.state.overlayCreated?null:f.default.createElement(T.default,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,projectFromLeftTop:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return f.default.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},f.default.createElement(_.default,{ref:"google_map_dom"}),e)}}]),t}(d.Component);X.propTypes={apiKey:d.PropTypes.string,bootstrapURLKeys:d.PropTypes.any,defaultCenter:f.default.PropTypes.oneOfType([d.PropTypes.array,d.PropTypes.shape({lat:d.PropTypes.number,lng:d.PropTypes.number})]),center:f.default.PropTypes.oneOfType([d.PropTypes.array,d.PropTypes.shape({lat:d.PropTypes.number,lng:d.PropTypes.number})]),defaultZoom:d.PropTypes.number,zoom:d.PropTypes.number,onBoundsChange:d.PropTypes.func,onChange:d.PropTypes.func,onClick:d.PropTypes.func,onChildClick:d.PropTypes.func,onChildMouseDown:d.PropTypes.func,onChildMouseUp:d.PropTypes.func,onChildMouseMove:d.PropTypes.func,onChildMouseEnter:d.PropTypes.func,onChildMouseLeave:d.PropTypes.func,onZoomAnimationStart:d.PropTypes.func,onZoomAnimationEnd:d.PropTypes.func,onDrag:d.PropTypes.func,onMapTypeIdChange:d.PropTypes.func,options:d.PropTypes.any,distanceToMouse:d.PropTypes.func,hoverDistance:d.PropTypes.number,debounced:d.PropTypes.bool,margin:d.PropTypes.array,googleMapLoader:d.PropTypes.any,onGoogleApiLoaded:d.PropTypes.func,yesIWantToUseGoogleMapApiInternals:d.PropTypes.bool,draggable:d.PropTypes.bool,style:d.PropTypes.any,resetBoundsOnResize:d.PropTypes.bool,layerTypes:d.PropTypes.arrayOf(d.PropTypes.string)},X.defaultProps={distanceToMouse:function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},hoverDistance:30,debounced:!0,options:c,googleMapLoader:k.default,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[]},X.googleMapLoader=k.default,t.default=X},597:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(11),l=r(c),u={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return l.default.createElement("div",{style:u})}}]),t}(c.Component);t.default=d},598:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){return a.default.createElement("div",{style:l},a.default.createElement(c.default,i({},e,{prerender:!0})))};var o=n(11),a=r(o),s=n(278),c=r(s),l={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"}},599:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(611),l=r(c),u=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gmapInstance=e,n}return a(t,e),s(t,[{key:"getChildren",value:function(){return this.gmapInstance.props.children}},{key:"getMousePosition",value:function(){return this.gmapInstance.mouse_}},{key:"getUpdateCounter",value:function(){return this.gmapInstance.updateCounter_}},{key:"dispose",value:function(){this.gmapInstance=null,this.removeAllListeners()}}]),t}(l.default);t.default=u},600:function(e,t){"use strict";function n(e,t,n){if(e&&t){for(var r=0;r!==e.length;++r)if(Math.abs(e[r]-t[r])>n)return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},601:function(e,t){"use strict";function n(){if(r)return r;if("undefined"!=typeof navigator){var e=navigator.userAgent.indexOf("MSIE")>-1,t=navigator.userAgent.indexOf("Firefox")>-1,n=navigator.userAgent.toLowerCase().indexOf("op")>-1,i=navigator.userAgent.indexOf("Chrome")>-1,o=navigator.userAgent.indexOf("Safari")>-1;return i&&o&&(o=!1),i&&n&&(i=!1),r={isExplorer:e,isFirefox:t,isOpera:n,isChrome:i,isSafari:o}}return r={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=null},602:function(e,t){"use strict";var n,r=!("undefined"==typeof window||!window.document||!window.document.createElement);n=r?window:"undefined"!=typeof self?self:void 0;var i="undefined"!=typeof document&&document.attachEvent,o=!1;if(r&&!i){var a=function(){var e=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)};return function(t){return e(t)}}(),s=function(){var e=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout;return function(t){return e(t)}}(),c=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},l=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},u=function(e){var t=this;c(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a(function(){l(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})},d=!1,f="animation",p="",h="animationstart",v="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="";if(r){var w=document.createElement("fakeelement");if(void 0!==w.style.animationName&&(d=!0),d===!1)for(var y=0;y<v.length;y++)if(void 0!==w.style[v[y]+"AnimationName"]){g=v[y],f=g+"Animation",p="-"+g.toLowerCase()+"-",h=m[y],d=!0;break}}var _="resizeanim",b="@"+p+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",C=p+"animation: 1ms "+_+"; "}var M=function(){if(!o){var e=(b?b:"")+".resize-triggers { "+(C?C:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),o=!0}},T=function(e,t){if(void 0===e.parentNode){var n=document.createElement("div");e.parentNode=n}e=e.parentNode,i?e.attachEvent("onresize",t):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),M(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),c(e),e.addEventListener("scroll",u,!0),h&&e.__resizeTriggers__.addEventListener(h,function(t){t.animationName==_&&c(e)})),e.__resizeListeners__.push(t))},P=function(e,t){e=e.parentNode,i?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",u),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))};e.exports={addResizeListener:T,removeResizeListener:P}},603:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(280),c=r(s),l=n(284),u=r(l),d=n(606),f=r(d),p=function(){function e(t){i(this,e),this.hasSize_=!1,this.hasView_=!1,this.transform_=new f.default(t||512)}return a(e,[{key:"setView",value:function(e,t,n){this.transform_.center=c.default.convert(e),this.transform_.zoom=+t,this.transform_.bearing=+n,this.hasView_=!0}},{key:"setViewSize",value:function(e,t){this.transform_.width=e,this.transform_.height=t,this.hasSize_=!0}},{key:"canProject",value:function(){return this.hasSize_&&this.hasView_}},{key:"hasSize",value:function(){return this.hasSize_}},{key:"unproject",value:function(e,t){var n=void 0;if(t){var r=o({},e);r.x-=this.transform_.width/2,r.y-=this.transform_.height/2,n=this.transform_.pointLocation(u.default.convert(r))}else n=this.transform_.pointLocation(u.default.convert(e));return n.lng-=360*Math.round(n.lng/360),n}},{key:"project",value:function(e,t){if(t){var n=this.transform_.locationPoint(c.default.convert(e));return n.x-=this.transform_.worldSize*Math.round(n.x/this.transform_.worldSize),n.x+=this.transform_.width/2,n.y+=this.transform_.height/2,n}return this.transform_.locationPoint(c.default.convert(e))}},{key:"getWidth",value:function(){return this.transform_.width}},{key:"getHeight",value:function(){return this.transform_.height}},{key:"getZoom",value:function(){return this.transform_.zoom}},{key:"getCenter",value:function(){var e=this.transform_.pointLocation({x:0,y:0});return e}},{key:"getBounds",value:function(e,t){var n=e&&e[0]||0,r=e&&e[1]||0,i=e&&e[2]||0,o=e&&e[3]||0;if(this.getWidth()-r-o>0&&this.getHeight()-n-i>0){var a=this.unproject({x:o-this.getWidth()/2,y:n-this.getHeight()/2}),s=this.unproject({x:this.getWidth()/2-r,y:this.getHeight()/2-i}),c=[a.lat,a.lng,s.lat,s.lng,s.lat,a.lng,a.lat,s.lng];return t&&(c=c.map(function(e){return Math.round(e*t)/t})),c}return[0,0,0,0]}}]),e}();t.default=p},604:function(e,t){"use strict";function n(e){return!!e&&"object"===("undefined"==typeof e?"undefined":i(e))}function r(e){var t="[object Number]";return"number"==typeof e||n(e)&&o.call(e)===t}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var o=Object.prototype.toString},605:function(e,t){"use strict";function n(e){if(!e||"object"!==("undefined"==typeof e?"undefined":r(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&i(n)===i(Object)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n;var i=function(e){return Function.prototype.toString.call(e)}},606:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(280),s=r(a),c=n(284),l=r(c),u=n(281),d=function(){function e(t,n,r){i(this,e),this.tileSize=t||512,this._minZoom=n||0,this._maxZoom=r||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new s.default(0,0),this.angle=0}return o(e,[{
key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(e,t){return new l.default(this.lngX(e.lng,t),this.latY(e.lat,t))}},{key:"unproject",value:function(e,t){return new s.default(this.yLat(e.y,t),this.xLng(e.x,t))}},{key:"lngX",value:function(e,t){return(180+e)*(t||this.worldSize)/360}},{key:"latY",value:function(e,t){var n=180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360));return(180-n)*(t||this.worldSize)/360}},{key:"xLng",value:function(e,t){return 360*e/(t||this.worldSize)-180}},{key:"yLat",value:function(e,t){var n=180-360*e/(t||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}},{key:"locationPoint",value:function(e){var t=this.project(e);return this.centerPoint._sub(this.point._sub(t)._rotate(this.angle))}},{key:"pointLocation",value:function(e){var t=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(t))}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new l.default(0,0)}},{key:"size",get:function(){return new l.default(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-(0,u.wrap)(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new l.default(this.x,this.y)}}]),e}();t.default=d},607:function(e,t,n){"use strict";function r(e){return i||(i=n(612)),e?o?o:(o=new Promise(function(t,n){if("undefined"==typeof window)return void n(new Error("google map cannot be loaded outside browser env"));if(window.google&&window.google.maps)return void t(window.google.maps);"undefined"!=typeof window._$_google_map_initialize_$_&&n(new Error("google map initialization error")),window._$_google_map_initialize_$_=function(){delete window._$_google_map_initialize_$_,t(window.google.maps)};var r=Object.keys(e).reduce(function(t,n){return t+"&"+n+"="+e[n]},"");i("https://maps.googleapis.com/maps/api/js?callback=_$_google_map_initialize_$_"+r,function(){return"undefined"==typeof window.google&&n(new Error("google map initialization error (not loaded)"))})}),a(o),o):s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=null,o=void 0,a=void 0,s=new Promise(function(e){a=e})},608:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.log2?Math.log2:function(e){return Math.log(e)/Math.LN2};t.default=n},609:function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},610:function(e,t){"use strict";function n(e){if(window.requestAnimationFrame)return window.requestAnimationFrame(e);var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?t(e):window.setTimeout(e,1e3/60)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},611:function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)o.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,i),!0;case 6:return u.fn.call(u.context,t,n,r,i,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var o=this._events[i],s=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||n&&o.context!==n)&&s.push(o);else for(var c=0,l=o.length;c<l;c++)(o[c].fn!==t||r&&!o[c].once||n&&o[c].context!==n)&&s.push(o[c]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},612:function(e,t,n){var r,i;/*!
    * $script.js JS loader & dependency manager
    * https://github.com/ded/script.js
    * (c) Dustin Diaz 2014 | License MIT
    */
!function(o,a){"undefined"!=typeof e&&e.exports?e.exports=a():(r=a,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i)))}("$script",function(){function e(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return c;return 1}function t(t,n){e(t,function(e){return!n(e)})}function n(o,a,s){function c(e){return e.call?e():f[e]}function u(){if(!--w){f[g]=1,m&&m();for(var n in h)e(n.split("|"),c)&&!t(h[n],c)&&(h[n]=[])}}o=o[l]?o:[o];var d=a&&a.call,m=d?a:s,g=d?o.join(""):a,w=o.length;return setTimeout(function(){t(o,function e(t,n){return null===t?u():(n||/^https?:\/\//.test(t)||!i||(t=t.indexOf(".js")===-1?i+t+".js":i+t),v[t]?(g&&(p[g]=1),2==v[t]?u():setTimeout(function(){e(t,!0)},0)):(v[t]=1,g&&(p[g]=1),void r(t,u)))})},0),n}function r(e,t){var n,r=a.createElement("script");r.onload=r.onerror=r[d]=function(){r[u]&&!/^c|loade/.test(r[u])||n||(r.onload=r[d]=null,n=1,v[e]=2,t())},r.async=1,r.src=o?e+(e.indexOf("?")===-1?"?":"&")+o:e,s.insertBefore(r,s.lastChild)}var i,o,a=document,s=a.getElementsByTagName("head")[0],c=!1,l="push",u="readyState",d="onreadystatechange",f={},p={},h={},v={};return n.get=r,n.order=function(e,t,r){!function i(o){o=e.shift(),e.length?n(o,i):n(o,t,r)}()},n.path=function(e){i=e},n.urlArgs=function(e){o=e},n.ready=function(r,i,o){r=r[l]?r:[r];var a=[];return!t(r,function(e){f[e]||a[l](e)})&&e(r,function(e){return f[e]})?i():!function(e){h[e]=h[e]||[],h[e][l](i),o&&o(a)}(r.join("|")),n},n.done=function(e){n([null],e)},n})},628:function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return i(d.decode(e))}function i(e){var t="";if(null!=e&&void 0!=e)for(var n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function o(e,t){return new f.BitMatrix(e,t)}function a(e,t,n){return i(s(e,t,n))}function s(e,t,n){var r=p(e,t,n),i=l.locate(r);if(!i)return null;var o=u.extract(r,i);return o?d.decode(o):null}var c=n(1),l=n(3),u=n(4),d=n(9),f=n(2),p=c.binarize;t.binarizeImage=p;var h=l.locate;t.locateQRInBinaryImage=h;var v=u.extract;t.extractQRFromBinaryImage=v,t.decodeQR=r,t.createBitMatrix=o,t.decodeQRFromImage=a,t.decodeQRFromImageAsByteArray=s},function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=new Array(n),a=0;a<n;a++)o[a]=new Array(t);for(var l=0;l<n;l++){var d=l<<s,f=i-c;d>f&&(d=f);for(var p=0;p<t;p++){var h=p<<s,v=r-c;h>v&&(h=v);for(var m=0,g=255,w=0,y=0,_=d*r+h;y<c;y++,_+=r){for(var b=0;b<c;b++){var C=255&e[_+b];m+=C,C<g&&(g=C),C>w&&(w=C)}if(w-g>u)for(y++,_+=r;y<c;y++,_+=r)for(var b=0;b<c;b++)m+=255&e[_+b]}var M=m>>2*s;if(w-g<=u&&(M=g>>1,l>0&&p>0)){var T=o[l-1][p]+2*o[l][p-1]+o[l-1][p-1]>>2;g<T&&(M=T)}o[l][p]=M}}return o}function i(e,t,n,r,i,o){function l(e,t,n){return e<t?t:e>n?n:e}function u(e,t,n,r,i){for(var o=n*i+t,a=0;a<c;a++,o+=i)for(var s=0;s<c;s++){var l=255&e[o+s];d.set(t+s,n+a,l<=r)}}for(var d=a.BitMatrix.createEmpty(r,i),f=0;f<n;f++){var p=f<<s,h=i-c;p>h&&(p=h);for(var v=0;v<t;v++){var m=v<<s,g=r-c;m>g&&(m=g);for(var w=l(v,2,t-3),y=l(f,2,n-3),_=0,b=-2;b<=2;b++){var C=o[y+b];_+=C[w-2],_+=C[w-1],_+=C[w],_+=C[w+1],_+=C[w+2]}var M=_/25;u(e,m,p,M,r)}}return d}function o(e,t,n){if(e.length!==t*n*4)throw new Error("Binarizer data.length != width * height * 4");for(var o=new Array(t*n),a=0;a<t;a++)for(var c=0;c<n;c++){var u=4*(c*t+a),d=e[u],f=e[u+1],p=e[u+2],h=.2126*d+.7152*f+.0722*p;o[c*t+a]=h}var v=t>>s;0!=(t&l)&&v++;var m=n>>s;0!=(n&l)&&m++;var g=r(o,v,m,t,n);return i(o,v,m,t,n,g)}var a=n(2),s=3,c=1<<s,l=c-1,u=24;t.binarize=o},function(e,t){"use strict";var n=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,n){for(var r=new Array(t*n),i=0;i<r.length;i++)r[i]=!1;return new e(r,t)},e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n},e.prototype.copyBit=function(e,t,n){return this.get(e,t)?n<<1|1:n<<1},e.prototype.setRegion=function(e,t,n,r){for(var i=e+n,o=t+r,a=t;a<o;a++)for(var s=e;s<i;s++)this.set(s,a,!0)},e.prototype.mirror=function(){for(var e=0;e<this.width;e++)for(var t=e+1;t<this.height;t++)this.get(e,t)!=this.get(t,e)&&(this.set(e,t,!this.get(e,t)),this.set(t,e,!this.get(t,e)))},e}();t.BitMatrix=n},function(e,t){"use strict";function n(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var i=(t<<d)/7,o=i/2;return Math.abs(i-(e[0]<<d))<o&&Math.abs(i-(e[1]<<d))<o&&Math.abs(3*i-(e[2]<<d))<3*o&&Math.abs(i-(e[3]<<d))<o&&Math.abs(i-(e[4]<<d))<o}function r(e,t){var n=t-e[4]-e[3]-e[2]/2;return n!==n?null:n}function i(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function o(e,t,n){var r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}function a(e){var t,n,r,a=i(e[0],e[1]),s=i(e[1],e[2]),c=i(e[0],e[2]);if(s>=a&&s>=c?(n=e[0],t=e[1],r=e[2]):c>=s&&c>=a?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),o(t,n,r)<0){var l=t;t=r,r=l}return{bottomLeft:{x:t.x,y:t.y},topLeft:{x:n.x,y:n.y},topRight:{x:r.x,y:r.y}}}function s(e){function t(t,n){return t=Math.floor(t),n=Math.floor(n),e.get(t,n)}function i(r,i,o,a){for(var s=e.height,c=e.width,l=[0,0,0,0,0],u=0;r-u>=0&&t(i-u,r-u);)l[2]++,u++;if(r-u<0||i-u<0)return!1;for(;r-u>=0&&i-u>=0&&!t(i-u,r-u)&&l[1]<=o;)l[1]++,u++;if(r-u<0||i-u<0||l[1]>o)return!1;for(;r-u>=0&&i-u>=0&&t(i-u,r-u)&&l[0]<=o;)l[0]++,u++;if(l[0]>o)return!1;for(u=1;r+u<s&&i+u<c&&t(i+u,r+u);)l[2]++,u++;if(r+u>=s||i+u>=c)return!1;for(;r+u<s&&i+u<c&&!t(i+u,r+u)&&l[3]<o;)l[3]++,u++;if(r+u>=s||i+u>=c||l[3]>=o)return!1;for(;r+u<s&&i+u<c&&t(i+u,r+u)&&l[4]<o;)l[4]++,u++;if(l[4]>=o)return!1;var d=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(d-a)<2*a&&n(l)}function o(i,o,a,s){for(var c=e.height,l=[0,0,0,0,0],u=i;u>=0&&t(o,u);)l[2]++,u--;if(u<0)return null;for(;u>=0&&!t(o,u)&&l[1]<=a;)l[1]++,u--;if(u<0||l[1]>a)return null;for(;u>=0&&t(o,u)&&l[0]<=a;)l[0]++,u--;if(l[0]>a)return null;for(u=i+1;u<c&&t(o,u);)l[2]++,u++;if(u==c)return null;for(;u<c&&!t(o,u)&&l[3]<a;)l[3]++,u++;if(u==c||l[3]>=a)return null;for(;u<c&&t(o,u)&&l[4]<a;)l[4]++,u++;if(l[4]>=a)return null;var d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-s)>=2*s?null:n(l)?r(l,u):null}function s(){var e=0,t=0,n=m.length;if(m.forEach(function(n){n.count>=c&&(e++,t+=n.estimatedModuleSize)}),e<3)return!1;for(var r=t/n,i=0,o=0;o<n;o++){var a=m[o];i+=Math.abs(a.estimatedModuleSize-r)}return i<=.05*t}function d(i,o,a,s){for(var c=e.width,l=[0,0,0,0,0],u=i;u>=0&&t(u,o);)l[2]++,u--;if(u<0)return null;for(;u>=0&&!t(u,o)&&l[1]<=a;)l[1]++,u--;if(u<0||l[1]>a)return null;for(;u>=0&&t(u,o)&&l[0]<=a;)l[0]++,u--;if(l[0]>a)return null;for(u=i+1;u<c&&t(u,o);)l[2]++,u++;if(u==c)return null;for(;u<c&&!t(u,o)&&l[3]<a;)l[3]++,u++;if(u==c||l[3]>=a)return null;for(;u<c&&t(u,o)&&l[4]<a;)l[4]++,u++;if(l[4]>=a)return null;var d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-s)>=s?null:n(l)?r(l,u):null}function p(e,t,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],c=r(e,n);if(null==c)return!1;var l=o(t,Math.floor(c),e[2],s);if(null!=l&&(c=d(Math.floor(c),Math.floor(l),e[2],s),null!=c&&(!a||i(Math.floor(l),Math.floor(c),e[2],s)))){for(var u=s/7,p=!1,h=0;h<m.length;h++){var v=m[h];if(v.aboutEquals(u,l,c)){m.splice(h,1,v.combineEstimate(l,c,u)),p=!0;break}}if(!p){var g=new f(c,l,u);m.push(g)}return!0}return!1}function h(){var e=m.length;if(e<=1)return 0;var t=null;return m.forEach(function(e){if(e.count>=c){if(null!=t)return g=!0,Math.floor(Math.abs(t.x-e.x)-Math.abs(t.y-e.y))/2;t=e}}),0}function v(){var e=m.length;if(e<3)return null;if(e>3){var t=0,n=0;m.forEach(function(e){var r=e.estimatedModuleSize;t+=r,n+=r*r});var r=t/e,i=Math.sqrt(n/e-r*r);m.sort(function(e,t){var n=Math.abs(t.estimatedModuleSize-r),i=Math.abs(e.estimatedModuleSize-r);return n<i?-1:n==i?0:1});for(var o=Math.max(.2*r,i),a=0;a<m.length&&m.length>3;a++){var s=m[a];Math.abs(s.estimatedModuleSize-r)>o&&(m.splice(a,1),a--)}}if(m.length>3){var t=0;m.forEach(function(e){t+=e.estimatedModuleSize});var r=t/m.length;m.sort(function(e,t){if(t.count===e.count){var n=Math.abs(t.estimatedModuleSize-r),i=Math.abs(e.estimatedModuleSize-r);return n<i?1:n==i?0:-1}return t.count-e.count}),m=m.slice(0,3)}return[m[0],m[1],m[2]]}var m=[],g=!1,w=!1,y=e.height,_=e.width,b=Math.floor(3*y/(4*u));b<l&&(b=l);for(var C=!1,M=[0,0,0,0,0],T=b-1;T<y&&!C;T+=b){M=[0,0,0,0,0];for(var P=0,k=0;k<_;k++)if(t(k,T))1===(1&P)&&P++,M[P]++;else if(0===(1&P))if(4===P)if(n(M)){var S=p(M,T,k,w);if(!S){M=[M[2],M[3],M[4],1,0],P=3;continue}if(b=2,g)C=s();else{var O=h();O>M[2]&&(T+=O-M[2]-b,k=_-1)}M=[0,0,0,0,0],P=0}else M=[M[2],M[3],M[4],1,0],P=3;else M[++P]++;else M[P]++;if(n(M)){var S=p(M,T,_,w);S&&(b=M[0],g&&(C=s()))}}var E=v();return E?a(E):null}var c=2,l=3,u=57,d=8,f=function(){function e(e,t,n,r){this.x=e,this.y=t,this.estimatedModuleSize=n,null==r?this.count=1:this.count=r}return e.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,r){var i=this.count+1,o=(this.count*this.x+n)/i,a=(this.count*this.y+t)/i,s=(this.count*this.estimatedModuleSize+r)/i;return new e(o,a,s,i)},e}();t.locate=s},function(e,t,n){"use strict";function r(e,t,n){for(var r=!0,i=0;i<n.length&&r;i+=2){var o=Math.floor(n[i]),a=Math.floor(n[i+1]);if(o<-1||o>e||a<-1||a>t)throw new Error;r=!1,o==-1?(n[i]=0,r=!0):o==e&&(n[i]=e-1,r=!0),a==-1?(n[i+1]=0,r=!0):a==t&&(n[i+1]=t-1,r=!0)}r=!0;for(var i=n.length-2;i>=0&&r;i-=2){var o=Math.floor(n[i]),a=Math.floor(n[i+1]);if(o<-1||o>e||a<-1||a>t)throw new Error;r=!1,o==-1?(n[i]=0,r=!0):o==e&&(n[i]=e-1,r=!0),a==-1?(n[i+1]=0,r=!0):a==t&&(n[i+1]=t-1,r=!0)}return n}function i(e,t,n){if(t<=0)return null;for(var i=w.BitMatrix.createEmpty(t,t),o=new Array(t<<1),a=0;a<t;a++){for(var s=o.length,c=a+.5,l=0;l<s;l+=2)o[l]=(l>>1)+.5,o[l+1]=c;o=m.transformPoints(n,o);try{var u=r(e.width,e.height,o)}catch(e){return null}for(var l=0;l<s;l+=2)i.set(l>>1,a,e.get(Math.floor(u[l]),Math.floor(u[l+1])))}return i}function o(e,t,n,r,i){var o,a,s,c,l=i-3.5;return null!=r?(o=r.x,a=r.y,s=c=l-3):(o=t.x-e.x+n.x,a=t.y-e.y+n.y,s=c=l),m.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,s,c,3.5,l,e.x,e.y,t.x,t.y,o,a,n.x,n.y)}function a(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function s(e,t,n,r,i){t=Math.floor(t),n=Math.floor(n);var o=Math.floor(r*e),a=Math.max(0,t-o),s=Math.min(i.width,t+o);if(s-a<3*e)return null;var c=Math.max(0,n-o),l=Math.min(i.height-1,n+o);return v.findAlignment(a,c,s-a,l-c,e,i)}function c(e,t,n,r){var i=Math.round(a(e.x,e.y,t.x,t.y)/r),o=Math.round(a(e.x,e.y,n.x,n.y)/r),s=(i+o>>1)+7;switch(3&s){case 0:s++;break;case 2:s--}return s}function l(e){if(e%4!=1)return null;var t=e-17>>2;return t<1||t>40?null:g.getVersionForNumber(t)}function u(e,t,n,r,i){e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),r=Math.floor(r);var o=Math.abs(r-t)>Math.abs(n-e);if(o){var s=e;e=t,t=s,s=n,n=r,r=s}for(var c=Math.abs(n-e),l=Math.abs(r-t),u=-c>>1,d=e<n?1:-1,f=t<r?1:-1,p=0,h=n+d,v=e,m=t;v!=h;v+=d){var g=o?m:v,w=o?v:m;if(1==p===i.get(g,w)){if(2==p)return a(v,m,e,t);p++}if(u+=l,u>0){if(m==r)break;m+=f,u-=c}}return 2==p?a(n+d,r,e,t):NaN}function d(e,t,n,r,i){var o=u(e,t,n,r,i),a=1,s=e-(n-e);s<0?(a=e/(e-s),s=0):s>=i.width&&(a=(i.width-1-e)/(s-e),s=i.width-1);var c=t-(r-t)*a;return a=1,c<0?(a=t/(t-c),c=0):c>=i.height&&(a=(i.height-1-t)/(c-t),c=i.height-1),s=e+(s-e)*a,o+=u(e,t,s,c,i),o-1}function f(e,t,n){var r=d(e.x,e.y,t.x,t.y,n),i=d(t.x,t.y,e.x,e.y,n);return y.isNaN(r)?i/7:y.isNaN(i)?r/7:(r+i)/14}function p(e,t,n,r){return(f(e,t,r)+f(e,n,r))/2}function h(e,t){var n=p(t.topLeft,t.topRight,t.bottomLeft,e);if(n<1)return null;var r=c(t.topLeft,t.topRight,t.bottomLeft,n);if(!r)return null;var a=l(r);if(null==a)return null;var u=a.getDimensionForVersion()-7,d=null;if(a.alignmentPatternCenters.length>0)for(var f=t.topRight.x-t.topLeft.x+t.bottomLeft.x,h=t.topRight.y-t.topLeft.y+t.bottomLeft.y,v=1-3/u,m=t.topLeft.x+v*(f-t.topLeft.x),g=t.topLeft.y+v*(h-t.topLeft.y),w=4;w<=16&&!(d=s(n,m,g,w,e));w<<=1);var y=o(t.topLeft,t.topRight,t.bottomLeft,d,r);return i(e,r,y)}var v=n(5),m=n(7),g=n(8),w=n(2),y=n(6);t.extract=h},function(e,t,n){"use strict";function r(e,t,n,r){if(Math.abs(n-e.y)<=t&&Math.abs(r-e.x)<=t){var i=Math.abs(t-e.estimatedModuleSize);return i<=1||i<=e.estimatedModuleSize}return!1}function i(e,t,n,r){var i=(e.x+n)/2,o=(e.y+t)/2,a=(e.estimatedModuleSize+r)/2;return{x:i,y:o,estimatedModuleSize:a}}function o(e,t){for(var n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}function a(e,t){var n=t-e[2]-e[1]/2;return l.isNaN(n)?null:n}function s(e,t,n,r,i,s){for(var c=s.height,l=[0,0,0],u=e;u>=0&&s.get(t,u)&&l[1]<=n;)l[1]++,u--;if(u<0||l[1]>n)return null;for(;u>=0&&!s.get(t,u)&&l[0]<=n;)l[0]++,u--;if(l[0]>n)return null;for(u=e+1;u<c&&s.get(t,u)&&l[1]<=n;)l[1]++,u++;if(u==c||l[1]>n)return null;for(;u<c&&!s.get(t,u)&&l[2]<=n;)l[2]++,u++;if(l[2]>n)return null;var d=l[0]+l[1]+l[2];return 5*Math.abs(d-r)>=2*r?null:o(l,i)?a(l,u):null}function c(e,t,n,c,l,u){function d(e,t,n,o){var c=e[0]+e[1]+e[2],l=a(e,n);if(null==l)return null;var d=s(t,Math.floor(l),2*e[1],c,o,u);if(null!=d){var p=(e[0]+e[1]+e[2])/3;for(var h in f){var v=f[h];if(r(v,p,d,l))return i(v,d,l,p)}var m={x:l,y:d,estimatedModuleSize:p};f.push(m)}return null}for(var f=[],p=e+n,h=t+(c>>1),v=[0,0,0],m=0;m<c;m++){var g=h+(0==(1&m)?m+1>>1:-(m+1>>1));v[0]=0,v[1]=0,v[2]=0;for(var w=e;w<p&&!u.get(w,g);)w++;for(var y=0;w<p;){if(u.get(w,g))if(1==y)v[y]++;else if(2==y){if(o(v,l)&&(_=d(v,g,w,l),null!=_))return _;v[0]=v[2],v[1]=1,v[2]=0,y=1}else v[++y]++;else 1==y&&y++,v[y]++;w++}if(o(v,l)){var _=d(v,g,l,p);if(null!=_)return _}}return 0!=f.length?f[0]:null}var l=n(6);t.findAlignment=c},function(e,t){"use strict";function n(e,t){return e^=t,i[15&e]+i[e>>4&15]+i[e>>8&15]+i[e>>12&15]+i[e>>16&15]+i[e>>20&15]+i[e>>24&15]+i[e>>28&15]}function r(e){return"[object Number]"===Object.prototype.toString.call(e)&&e!==+e}var i=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];t.numBitsDiffering=n,t.isNaN=r},function(e,t){"use strict";function n(e,t,n,r,i,o,a,s){var c=e-n+i-a,l=t-r+o-s;if(0==c&&0==l)return{a11:n-e,a21:i-n,a31:e,a12:r-t,a22:o-r,a32:t,a13:0,a23:0,a33:1};var u=n-i,d=a-i,f=r-o,p=s-o,h=u*p-d*f,v=(c*p-d*l)/h,m=(u*l-c*f)/h;return{a11:n-e+v*n,a21:a-e+m*a,a31:e,a12:r-t+v*r,a22:s-t+m*s,a32:t,a13:v,a23:m,a33:1}}function r(e){return{a11:e.a22*e.a33-e.a23*e.a32,a21:e.a23*e.a31-e.a21*e.a33,a31:e.a21*e.a32-e.a22*e.a31,a12:e.a13*e.a32-e.a12*e.a33,a22:e.a11*e.a33-e.a13*e.a31,a32:e.a12*e.a31-e.a11*e.a32,a13:e.a12*e.a23-e.a13*e.a22,a23:e.a13*e.a21-e.a11*e.a23,a33:e.a11*e.a22-e.a12*e.a21}}function i(e,t){return{a11:e.a11*t.a11+e.a21*t.a12+e.a31*t.a13,a21:e.a11*t.a21+e.a21*t.a22+e.a31*t.a23,a31:e.a11*t.a31+e.a21*t.a32+e.a31*t.a33,a12:e.a12*t.a11+e.a22*t.a12+e.a32*t.a13,a22:e.a12*t.a21+e.a22*t.a22+e.a32*t.a23,a32:e.a12*t.a31+e.a22*t.a32+e.a32*t.a33,a13:e.a13*t.a11+e.a23*t.a12+e.a33*t.a13,a23:e.a13*t.a21+e.a23*t.a22+e.a33*t.a23,a33:e.a13*t.a31+e.a23*t.a32+e.a33*t.a33}}function o(e,t,i,o,a,s,c,l){return r(n(e,t,i,o,a,s,c,l))}function a(e,t){for(var n=t.length,r=e.a11,i=e.a12,o=e.a13,a=e.a21,s=e.a22,c=e.a23,l=e.a31,u=e.a32,d=e.a33,f=0;f<n;f+=2){var p=t[f],h=t[f+1],v=o*p+c*h+d;t[f]=(r*p+a*h+l)/v,t[f+1]=(i*p+s*h+u)/v}return t}function s(e,t,r,a,s,c,l,u,d,f,p,h,v,m,g,w){var y=o(e,t,r,a,s,c,l,u),_=n(d,f,p,h,v,m,g,w);return i(_,y)}t.transformPoints=a,t.quadrilateralToQuadrilateral=s},function(e,t,n){"use strict";function r(e){if(e<1||e>40)throw new Error("Invalid version number "+e);return l[e-1]}var i=n(6),o=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],a=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e}(),s=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getNumBlocks=function(){return this.ecBlocks.reduce(function(e,t){return e+t.count},0)},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e}(),c=function(){function e(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;var i=0,o=this.ecBlocks[0].ecCodewordsPerBlock,a=this.ecBlocks[0].ecBlocks;a.forEach(function(e){i+=e.count*(e.dataCodewords+o)}),this.totalCodewords=i}return e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.ordinal]},e.decodeVersionInformation=function(e){for(var t=1/0,n=0,a=0;a<o.length;a++){var s=o[a];if(s==e)return r(a+7);var c=i.numBitsDiffering(e,s);c<t&&(n=a+7,t=c)}return t<=3?r(n):null},e}();t.Version=c;var l=[new c(1,[],new s(7,new a(1,19)),new s(10,new a(1,16)),new s(13,new a(1,13)),new s(17,new a(1,9))),new c(2,[6,18],new s(10,new a(1,34)),new s(16,new a(1,28)),new s(22,new a(1,22)),new s(28,new a(1,16))),new c(3,[6,22],new s(15,new a(1,55)),new s(26,new a(1,44)),new s(18,new a(2,17)),new s(22,new a(2,13))),new c(4,[6,26],new s(20,new a(1,80)),new s(18,new a(2,32)),new s(26,new a(2,24)),new s(16,new a(4,9))),new c(5,[6,30],new s(26,new a(1,108)),new s(24,new a(2,43)),new s(18,new a(2,15),new a(2,16)),new s(22,new a(2,11),new a(2,12))),new c(6,[6,34],new s(18,new a(2,68)),new s(16,new a(4,27)),new s(24,new a(4,19)),new s(28,new a(4,15))),new c(7,[6,22,38],new s(20,new a(2,78)),new s(18,new a(4,31)),new s(18,new a(2,14),new a(4,15)),new s(26,new a(4,13),new a(1,14))),new c(8,[6,24,42],new s(24,new a(2,97)),new s(22,new a(2,38),new a(2,39)),new s(22,new a(4,18),new a(2,19)),new s(26,new a(4,14),new a(2,15))),new c(9,[6,26,46],new s(30,new a(2,116)),new s(22,new a(3,36),new a(2,37)),new s(20,new a(4,16),new a(4,17)),new s(24,new a(4,12),new a(4,13))),new c(10,[6,28,50],new s(18,new a(2,68),new a(2,69)),new s(26,new a(4,43),new a(1,44)),new s(24,new a(6,19),new a(2,20)),new s(28,new a(6,15),new a(2,16))),new c(11,[6,30,54],new s(20,new a(4,81)),new s(30,new a(1,50),new a(4,51)),new s(28,new a(4,22),new a(4,23)),new s(24,new a(3,12),new a(8,13))),new c(12,[6,32,58],new s(24,new a(2,92),new a(2,93)),new s(22,new a(6,36),new a(2,37)),new s(26,new a(4,20),new a(6,21)),new s(28,new a(7,14),new a(4,15))),new c(13,[6,34,62],new s(26,new a(4,107)),new s(22,new a(8,37),new a(1,38)),new s(24,new a(8,20),new a(4,21)),new s(22,new a(12,11),new a(4,12))),new c(14,[6,26,46,66],new s(30,new a(3,115),new a(1,116)),new s(24,new a(4,40),new a(5,41)),new s(20,new a(11,16),new a(5,17)),new s(24,new a(11,12),new a(5,13))),new c(15,[6,26,48,70],new s(22,new a(5,87),new a(1,88)),new s(24,new a(5,41),new a(5,42)),new s(30,new a(5,24),new a(7,25)),new s(24,new a(11,12),new a(7,13))),new c(16,[6,26,50,74],new s(24,new a(5,98),new a(1,99)),new s(28,new a(7,45),new a(3,46)),new s(24,new a(15,19),new a(2,20)),new s(30,new a(3,15),new a(13,16))),new c(17,[6,30,54,78],new s(28,new a(1,107),new a(5,108)),new s(28,new a(10,46),new a(1,47)),new s(28,new a(1,22),new a(15,23)),new s(28,new a(2,14),new a(17,15))),new c(18,[6,30,56,82],new s(30,new a(5,120),new a(1,121)),new s(26,new a(9,43),new a(4,44)),new s(28,new a(17,22),new a(1,23)),new s(28,new a(2,14),new a(19,15))),new c(19,[6,30,58,86],new s(28,new a(3,113),new a(4,114)),new s(26,new a(3,44),new a(11,45)),new s(26,new a(17,21),new a(4,22)),new s(26,new a(9,13),new a(16,14))),new c(20,[6,34,62,90],new s(28,new a(3,107),new a(5,108)),new s(26,new a(3,41),new a(13,42)),new s(30,new a(15,24),new a(5,25)),new s(28,new a(15,15),new a(10,16))),new c(21,[6,28,50,72,94],new s(28,new a(4,116),new a(4,117)),new s(26,new a(17,42)),new s(28,new a(17,22),new a(6,23)),new s(30,new a(19,16),new a(6,17))),new c(22,[6,26,50,74,98],new s(28,new a(2,111),new a(7,112)),new s(28,new a(17,46)),new s(30,new a(7,24),new a(16,25)),new s(24,new a(34,13))),new c(23,[6,30,54,74,102],new s(30,new a(4,121),new a(5,122)),new s(28,new a(4,47),new a(14,48)),new s(30,new a(11,24),new a(14,25)),new s(30,new a(16,15),new a(14,16))),new c(24,[6,28,54,80,106],new s(30,new a(6,117),new a(4,118)),new s(28,new a(6,45),new a(14,46)),new s(30,new a(11,24),new a(16,25)),new s(30,new a(30,16),new a(2,17))),new c(25,[6,32,58,84,110],new s(26,new a(8,106),new a(4,107)),new s(28,new a(8,47),new a(13,48)),new s(30,new a(7,24),new a(22,25)),new s(30,new a(22,15),new a(13,16))),new c(26,[6,30,58,86,114],new s(28,new a(10,114),new a(2,115)),new s(28,new a(19,46),new a(4,47)),new s(28,new a(28,22),new a(6,23)),new s(30,new a(33,16),new a(4,17))),new c(27,[6,34,62,90,118],new s(30,new a(8,122),new a(4,123)),new s(28,new a(22,45),new a(3,46)),new s(30,new a(8,23),new a(26,24)),new s(30,new a(12,15),new a(28,16))),new c(28,[6,26,50,74,98,122],new s(30,new a(3,117),new a(10,118)),new s(28,new a(3,45),new a(23,46)),new s(30,new a(4,24),new a(31,25)),new s(30,new a(11,15),new a(31,16))),new c(29,[6,30,54,78,102,126],new s(30,new a(7,116),new a(7,117)),new s(28,new a(21,45),new a(7,46)),new s(30,new a(1,23),new a(37,24)),new s(30,new a(19,15),new a(26,16))),new c(30,[6,26,52,78,104,130],new s(30,new a(5,115),new a(10,116)),new s(28,new a(19,47),new a(10,48)),new s(30,new a(15,24),new a(25,25)),new s(30,new a(23,15),new a(25,16))),new c(31,[6,30,56,82,108,134],new s(30,new a(13,115),new a(3,116)),new s(28,new a(2,46),new a(29,47)),new s(30,new a(42,24),new a(1,25)),new s(30,new a(23,15),new a(28,16))),new c(32,[6,34,60,86,112,138],new s(30,new a(17,115)),new s(28,new a(10,46),new a(23,47)),new s(30,new a(10,24),new a(35,25)),new s(30,new a(19,15),new a(35,16))),new c(33,[6,30,58,86,114,142],new s(30,new a(17,115),new a(1,116)),new s(28,new a(14,46),new a(21,47)),new s(30,new a(29,24),new a(19,25)),new s(30,new a(11,15),new a(46,16))),new c(34,[6,34,62,90,118,146],new s(30,new a(13,115),new a(6,116)),new s(28,new a(14,46),new a(23,47)),new s(30,new a(44,24),new a(7,25)),new s(30,new a(59,16),new a(1,17))),new c(35,[6,30,54,78,102,126,150],new s(30,new a(12,121),new a(7,122)),new s(28,new a(12,47),new a(26,48)),new s(30,new a(39,24),new a(14,25)),new s(30,new a(22,15),new a(41,16))),new c(36,[6,24,50,76,102,128,154],new s(30,new a(6,121),new a(14,122)),new s(28,new a(6,47),new a(34,48)),new s(30,new a(46,24),new a(10,25)),new s(30,new a(2,15),new a(64,16))),new c(37,[6,28,54,80,106,132,158],new s(30,new a(17,122),new a(4,123)),new s(28,new a(29,46),new a(14,47)),new s(30,new a(49,24),new a(10,25)),new s(30,new a(24,15),new a(46,16))),new c(38,[6,32,58,84,110,136,162],new s(30,new a(4,122),new a(18,123)),new s(28,new a(13,46),new a(32,47)),new s(30,new a(48,24),new a(14,25)),new s(30,new a(42,15),new a(32,16))),new c(39,[6,26,54,82,110,138,166],new s(30,new a(20,117),new a(4,118)),new s(28,new a(40,47),new a(7,48)),new s(30,new a(43,24),new a(22,25)),new s(30,new a(10,15),new a(67,16))),new c(40,[6,30,58,86,114,142,170],new s(30,new a(19,118),new a(6,119)),new s(28,new a(18,47),new a(31,48)),new s(30,new a(34,24),new a(34,25)),new s(30,new a(20,15),new a(61,16)))];t.getVersionForNumber=r},function(e,t,n){"use strict";function r(e){for(var t=e.getDimensionForVersion(),n=new Array(t*t),r=0;r<n.length;r++)n[r]=!1;var i=new h.BitMatrix(n,t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);for(var o=e.alignmentPatternCenters.length,a=0;a<o;a++)for(var r=e.alignmentPatternCenters[a]-2,s=0;s<o;s++)0==a&&(0==s||s==o-1)||a==o-1&&0==s||i.setRegion(e.alignmentPatternCenters[s]-2,r,5,5);return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),e.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}function i(e,t,n){for(var i=b[n.dataMask],o=e.height,a=r(t),s=!0,c=[],l=0,u=0,d=0,f=o-1;f>0;f-=2){6==f&&f--;for(var p=0;p<o;p++)for(var h=s?o-1-p:p,v=0;v<2;v++)a.get(f-v,h)||(d++,u<<=1,e.get(f-v,h)!==i(h,f-v)&&(u|=1),8==d&&(c[l++]=255&u,d=0,u=0));s=!s}return l!=t.totalCodewords?null:c}function o(e){var t=e.height,n=t-17>>2;if(n<=6)return w.getVersionForNumber(n);for(var r=0,i=t-11,o=5;o>=0;o--)for(var a=t-9;a>=i;a--)r=e.copyBit(a,o,r);var s=w.Version.decodeVersionInformation(r);if(null!=s&&s.getDimensionForVersion()==t)return s;r=0;for(var a=5;a>=0;a--)for(var o=t-9;o>=i;o--)r=e.copyBit(a,o,r);return s=w.Version.decodeVersionInformation(r),null!=s&&s.getDimensionForVersion()==t?s:null}function a(e){return{errorCorrectionLevel:C[e>>3&3],dataMask:7&e}}function s(e,t){for(var n=1/0,r=0,i=0;i<_.length;i++){var o=_[i],s=o[0];if(s==e||s==t)return a(o[1]);var c=m.numBitsDiffering(e,s);c<n&&(r=o[1],n=c),e!=t&&(c=m.numBitsDiffering(t,s),c<n&&(r=o[1],n=c))}return n<=3?a(r):null}function c(e,t){var n=s(e,t);return n?n:s(e^y,t^y)}function l(e){for(var t=0,n=0;n<6;n++)t=e.copyBit(n,8,t);t=e.copyBit(7,8,t),t=e.copyBit(8,8,t),t=e.copyBit(8,7,t);for(var r=5;r>=0;r--)t=e.copyBit(8,r,t);for(var i=e.height,o=0,a=i-7,r=i-1;r>=a;r--)o=e.copyBit(8,r,o);for(var n=i-8;n<i;n++)o=e.copyBit(n,8,o);var s=c(t,o);return null!=s?s:null}function u(e,t,n){if(e.length!=t.totalCodewords)throw new Error("Invalid number of codewords for version; got "+e.length+" expected "+t.totalCodewords);var r=t.getECBlocksForLevel(n),i=0,o=r.ecBlocks;o.forEach(function(e){i+=e.count});var a=new Array(i),s=0;o.forEach(function(e){for(var t=0;t<e.count;t++){var n=e.dataCodewords,i=r.ecCodewordsPerBlock+n;a[s++]={numDataCodewords:n,codewords:new Array(i)}}});for(var c=a[0].codewords.length,l=a.length-1;l>=0;){var u=a[l].codewords.length;if(u==c)break;l--}l++;for(var d=c-r.ecCodewordsPerBlock,f=0,p=0;p<d;p++)for(var h=0;h<s;h++)a[h].codewords[p]=e[f++];for(var h=l;h<s;h++)a[h].codewords[d]=e[f++];for(var v=a[0].codewords.length,p=d;p<v;p++)for(var h=0;h<s;h++){var m=h<l?p:p+1;a[h].codewords[m]=e[f++]}return a}function d(e,t){for(var n=new g.ReedSolomonDecoder,r=e.length,i=new Array(r),o=0;o<r;o++)i[o]=255&e[o];var a=e.length-t;if(!n.decode(i,a))return!1;for(var o=0;o<t;o++)e[o]=i[o];return!0}function f(e){var t=o(e);if(!t)return null;var n=l(e);if(!n)return null;var r=n.errorCorrectionLevel,a=i(e,t,n);if(!a)return null;var s=u(a,t,r),c=0;s.forEach(function(e){c+=e.numDataCodewords});for(var f=new Array(c),p=0,h=0,m=s;h<m.length;h++){var g=m[h],w=g.codewords,y=g.numDataCodewords;if(!d(w,y))return null;for(var _=0;_<y;_++)f[p++]=w[_]}return v.decodeQRdata(f,t.versionNumber,r.name)}function p(e){if(null==e)return null;var t=f(e);return t?t:(e.mirror(),f(e))}var h=n(2),v=n(10),m=n(6),g=n(12),w=n(8),y=21522,_=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],b=[function(e,t){return 0===(e+t&1)},function(e,t){return 0===(1&e)},function(e,t){return t%3==0},function(e,t){return(e+t)%3===0},function(e,t){return 0===((e>>1)+t/3&1)},function(e,t){return(e*t&1)+e*t%3===0},function(e,t){return 0===((e*t&1)+e*t%3&1)},function(e,t){return 0===((e+t&1)+e*t%3&1)}],C=[{ordinal:1,bits:0,name:"M"},{ordinal:0,bits:1,name:"L"},{ordinal:3,bits:2,name:"H"},{ordinal:2,bits:3,name:"Q"}];t.decode=p},function(e,t,n){"use strict";function r(e){var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];if(e>=t.length)throw new Error("Could not decode alphanumeric char");return t[e].charCodeAt(0)}function i(e){switch(e){case 0:return p;case 1:return h;case 2:return v;case 3:return m;case 4:return g;case 5:return _;case 7:return w;case 8:return y;case 9:return b;case 13:return C;default:throw new Error("Couldn't decode mode from byte array")}}function o(e){var t=e.readBits(8);if(0==(128&t))return 127&t;if(128==(192&t)){var n=e.readBits(8);return(63&t)<<8|n}if(192==(224&t)){var r=e.readBits(16);return(31&t)<<16|r}throw new Error("Bad ECI bits starting with byte "+t)}function a(e,t,n){if(13*n>e.available())return!1;for(var r=new Array(2*n),i=0;n>0;){var o=e.readBits(13),a=Math.floor(o/96)<<8|o%96;a+=a<959?41377:42657,r[i]=a>>8&255,r[i+1]=255&a,i+=2,n--}return t.val=r,!0}function s(e,t,n){for(;n>=3;){if(e.available()<10)return!1;var i=e.readBits(10);if(i>=1e3)return!1;t.val.push(r(Math.floor(i/100))),t.val.push(r(Math.floor(i/10)%10)),t.val.push(r(i%10)),n-=3}if(2==n){if(e.available()<7)return!1;var o=e.readBits(7);if(o>=100)return!1;t.val.push(r(Math.floor(o/10))),t.val.push(r(o%10))}else if(1==n){if(e.available()<4)return!1;var a=e.readBits(4);if(a>=10)return!1;t.val.push(r(a))}return!0}function c(e,t,n,i){for(var o=t.val.length;n>1;){if(e.available()<11)return!1;var a=e.readBits(11);t.val.push(r(Math.floor(a/45))),t.val.push(r(a%45)),n-=2}if(1==n){if(e.available()<6)return!1;t.val.push(r(e.readBits(6)))}if(i)for(var s=o;s<t.val.length;s++)t.val[s]=="%".charCodeAt(0)&&(s<t.val.length-1&&t.val[s+1]=="%".charCodeAt(0)?t.val=t.val.slice(0,s+1).concat(t.val.slice(s+2)):t.val[s]=29);return!0}function l(e,t,n){if(n<<3>e.available())return!1;for(var r=new Array(n),i=0;i<n;i++)r[i]=e.readBits(8);return t.val=r,!0}function u(e,t,n){for(var r,u=-1,f=-1,T=new d.BitStream(e),P={val:[]},k=!1;r!=p;)if(r=T.available()<4?p:i(T.readBits(4)),r!=p)if(r==_||r==b)k=!0;else if(r==m){if(T.available()<16)return null;u=T.readBits(8),f=T.readBits(8)}else if(r==w){var S=o(T);if(S<0||S>30)return null}else if(r==C){var O=T.readBits(4),E=T.readBits(r.getCharacterCountBits(t));if(O==M&&!a(T,P,E))return null}else{var x=T.readBits(r.getCharacterCountBits(t));if(r==h){if(!s(T,P,x))return null}else if(r==v){if(!c(T,P,x,k))return null}else if(r==g){if(!l(T,P,x))return null}else if(r!=y)return null}return P.val}var d=n(11),f=function(){function e(e,t){this.characterCountBitsForVersions=e,this.bits=t}return e.prototype.getCharacterCountBits=function(e){if(null==this.characterCountBitsForVersions)throw new Error("Character count doesn't apply to this mode");var t;return t=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[t]},e}(),p=new f([0,0,0],0),h=new f([10,12,14],1),v=new f([9,11,13],2),m=new f([0,0,0],3),g=new f([8,16,16],4),w=new f(null,7),y=new f([8,10,12],8),_=new f(null,5),b=new f(null,9),C=new f([8,10,12],13),M=1;t.decodeQRdata=u},function(e,t){"use strict";var n=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var n=8-this.bitOffset,r=e<n?e:n,i=n-r,o=255>>8-r<<i;t=(this.bytes[this.byteOffset]&o)>>i,e-=r,this.bitOffset+=r,8==this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;if(e>0){var i=8-e,o=255>>i<<i;t=t<<e|(this.bytes[this.byteOffset]&o)>>i,this.bitOffset+=e}}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=n},function(e,t){"use strict";var n=function(){function e(){this.field=new i(285,256,0)}return e.prototype.decode=function(e,t){for(var n=new r(this.field,e),o=new Array(t),a=!0,s=0;s<t;s++){var c=n.evaluateAt(this.field.exp(s+this.field.generatorBase));o[o.length-1-s]=c,0!=c&&(a=!1)}if(a)return!0;var l=new r(this.field,o),u=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),l,t);if(null==u)return!1;var d=u[0],f=this.findErrorLocations(d);if(null==f)return!1;for(var p=u[1],h=this.findErrorMagnitudes(p,f),s=0;s<f.length;s++){var v=e.length-1-this.field.log(f[s]);if(v<0)return!1;e[v]=i.addOrSubtract(e[v],h[s])}return!0},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.degree()<t.degree()){var r=e;e=t,t=r}for(var i=e,o=t,a=this.field.zero,s=this.field.one;o.degree()>=n/2;){var c=i,l=a;if(i=o,a=s,i.isZero())return null;o=c;for(var u=this.field.zero,d=i.getCoefficient(i.degree()),f=this.field.inverse(d);o.degree()>=i.degree()&&!o.isZero();){
var p=o.degree()-i.degree(),h=this.field.multiply(o.getCoefficient(o.degree()),f);u=u.addOrSubtract(this.field.buildMonomial(p,h)),o=o.addOrSubtract(i.multiplyByMonomial(p,h))}if(s=u.multiplyPoly(a).addOrSubtract(l),o.degree()>=i.degree())return null}var v=s.getCoefficient(0);if(0==v)return null;var m=this.field.inverse(v),g=s.multiply(m),w=o.multiply(m);return[g,w]},e.prototype.findErrorLocations=function(e){var t=e.degree();if(1==t)return[e.getCoefficient(1)];for(var n=new Array(t),r=0,i=1;i<this.field.size&&r<t;i++)0==e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);return r!=t?null:n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Array(n),i=0;i<n;i++){for(var o=this.field.inverse(t[i]),a=1,s=0;s<n;s++)if(i!=s){var c=this.field.multiply(t[s],o),l=0==(1&c)?1|c:c&-2;a=this.field.multiply(a,l)}r[i]=this.field.multiply(e.evaluateAt(o),this.field.inverse(a)),0!=this.field.generatorBase&&(r[i]=this.field.multiply(r[i],o))}return r},e}();t.ReedSolomonDecoder=n;var r=function(){function e(e,t){if(0==t.length)throw new Error("No coefficients.");this.field=e;var n=t.length;if(n>1&&0==t[0]){for(var r=1;r<n&&0==t[r];)r++;if(r==n)this.coefficients=e.zero.coefficients;else{this.coefficients=new Array(n-r);for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=t[r+i]}}else this.coefficients=t}return e.prototype.evaluateAt=function(e){var t=0;if(0==e)return this.getCoefficient(0);var n=this.coefficients.length;if(1==e)return this.coefficients.forEach(function(e){t=i.addOrSubtract(t,e)}),t;t=this.coefficients[0];for(var r=1;r<n;r++)t=i.addOrSubtract(this.field.multiply(e,t),this.coefficients[r]);return t},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0==this.coefficients[0]},e.prototype.addOrSubtract=function(t){if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}for(var a=new Array(r.length),s=r.length-n.length,c=0;c<s;c++)a[c]=r[c];for(var c=s;c<r.length;c++)a[c]=i.addOrSubtract(n[c-s],r[c]);return new e(this.field,a)},e.prototype.multiply=function(t){if(0==t)return this.field.zero;if(1==t)return this;for(var n=this.coefficients.length,r=new Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new e(this.field,r)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var n=this.coefficients,r=n.length,o=t.coefficients,a=o.length,s=new Array(r+a-1),c=0;c<r;c++)for(var l=n[c],u=0;u<a;u++)s[c+u]=i.addOrSubtract(s[c+u],this.field.multiply(l,o[u]));return new e(this.field,s)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Error("Invalid degree less than 0");if(0==n)return this.field.zero;for(var r=this.coefficients.length,i=new Array(r+t),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new e(this.field,i)},e}(),i=function(){function e(e,t,n){this.INITIALIZATION_THRESHOLD=0,this.initialized=!1,this.primitive=e,this.size=t,this.generatorBase=n,t<=this.INITIALIZATION_THRESHOLD&&this.initialize()}return e.prototype.initialize=function(){this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var e=1,t=0;t<this.size;t++)this.expTable[t]=e,e<<=1,e>=this.size&&(e^=this.primitive,e&=this.size-1);for(var t=0;t<this.size-1;t++)this.logTable[this.expTable[t]]=t;this.zero=new r(this,[0]),this.one=new r(this,[1]),this.initialized=!0},e.addOrSubtract=function(e,t){return e^t},e.prototype.checkInit=function(){this.initialized||this.initialize()},e.prototype.multiply=function(e,t){return this.checkInit(),0==e||0==t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.exp=function(e){return this.checkInit(),this.expTable[e]},e.prototype.log=function(e){if(this.checkInit(),0==e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.inverse=function(e){if(this.checkInit(),0==e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(this.checkInit(),e<0)throw new Error("Invalid monomial degree less than 0");if(0==t)return this.zero;var n=new Array(e+1);return n[0]=t,new r(this,n)},e}()}])})},629:function(e,t){!function(){var e=function(e,t,n){var r=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return r?new Promise(function(t,n){r.call(navigator,e,t,n)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))};void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=e)}()},707:function(e,t){"use strict";e.exports=function(e){return new Promise(function(t,n){navigator.mediaDevices.enumerateDevices().then(function(r){if(r=r.filter(function(e){return"videoinput"==e.kind}),r.length<1)n();else{if(r.length<2)return void t(r[0].deviceId);!function(){var n="rear"==e?/rear|back|environment/gi:/front|user|face/gi,i=r.filter(function(e){return n.test(e.label)});i.length>0?t(i[0].deviceId):t()}()}})})}},754:function(e,t){"use strict";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.getDtlsParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i=r.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),o={role:"auto",fingerprints:[{algorithm:i.split(" ")[0],value:i.split(" ")[1]}]};return o},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i={usernameFragment:r.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return i},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e),i=r[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=n.parseRtpMap(s),l=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=l.length?n.parseFmtp(l[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";return r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}),r+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,l=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{payloadType:e.payloadType,ssrc:t}};r.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var u=n.matchPrefix(e,"b=");return u.length&&(0===u[0].indexOf("b=TIAS:")?u=parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")&&(u=parseInt(u[0].substr(5),10)),r.forEach(function(e){e.maxBitrate=u})),r},n.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n"},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},e.exports=n},759:[900,591],762:[900,594],817:function(e,t,n){"use strict";!function(){var t=n(42).log,r=n(42).browserDetails;e.exports.browserDetails=r,e.exports.extractVersion=n(42).extractVersion,e.exports.disableLog=n(42).disableLog;var i=n(818)||null,o=n(820)||null,a=n(822)||null,s=n(824)||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void t("Chrome shim is not included in this adapter release.");t("adapter.js shimming chrome."),e.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void t("Firefox shim is not included in this adapter release.");t("adapter.js shimming firefox."),e.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void t("MS edge shim is not included in this adapter release.");t("adapter.js shimming edge."),e.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void t("Safari shim is not included in this adapter release.");t("adapter.js shimming safari."),e.exports.browserShim=s,s.shimGetUserMedia();break;default:t("Unsupported browser!")}}()},818:function(e,t,n){"use strict";var r=n(42).log,i=n(42).browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var c=function(e){o[1](s(a(e)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(t,n){1===o.length&&"object"==typeof e?i.apply(r,[function(e){t(s(a(e)))},n]):i.apply(r,[function(e){t(s(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(819)}},819:function(e,t,n){"use strict";var r=n(42).log;e.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if(i=i&&("object"==typeof i?i:{ideal:i}),i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(e){return"videoinput"===e.kind});var a=o.find(function(e){return e.label.toLowerCase().indexOf("back")!==-1})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=i;var o=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},820:function(e,t,n){"use strict";var r=n(754),i=n(42).browserDetails,o={shimPeerConnection:function(){if(window.RTCIceGatherer){window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e});var e=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(t){e.set.call(this,t);var n=new Event("enabled");n.enabled=t,this.dispatchEvent(n)}})}window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),t=t.filter(function(e){return 0===e.indexOf("turn:")&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1||0===e.indexOf("stun:")&&i.version>=14393})[0],!!t}return!1})}this._config=e,this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){var r=!n.candidate||0===Object.keys(n.candidate).length;if(r)for(var i=1;i<t.length;i++)t[i].indexOf("\r\na=end-of-candidates\r\n")===-1&&(t[i]+="a=end-of-candidates\r\n");else n.candidate.candidate.indexOf("typ endOfCandidates")===-1&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){var o=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});o&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this._config},window.RTCPeerConnection.prototype.addStream=function(e){var t=e.clone();e.getTracks().forEach(function(e,n){var r=t.getTracks()[n];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),this.localStreams.push(t),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate){i.numChannels=Math.min(e.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,l=!c||0===Object.keys(c).length;l?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var u=r.splitSections(n.localDescription.sdp);s.candidate.candidate.indexOf("typ endOfCandidates")===-1?u[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":u[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=u.join("");var d=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),l&&d&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),d&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete");break;case"complete":}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&("video"===e.kind&&e.recvEncodingParameters&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,l=a.dtlsTransport,u=a.localCapabilities,d=a.remoteCapabilities,f="0"===e.split("\n",1)[0].split(" ",2)[1];if(!f&&!a.isDatachannel){var p=r.getIceParameters(e,n);if(o){var h=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});h.length&&c.setRemoteCandidates(h)}var v=r.getDtlsParameters(e,n);o&&(v.role="server"),i.usingBundle&&0!==t||(c.start(s,p,o?"controlling":"controlled"),l.start(v));var m=i._getCommonCapabilities(u,d);i._transceive(a,m.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var l=r.splitLines(o),u=l[0].substr(2).split(" "),d=u[0],f="0"===u[1],p=r.getDirection(o,a),h=r.matchPrefix(o,"a=mid:");if(h=h.length?h[0].substr(6):r.generateIdentifier(),"application"===d&&"DTLS/SCTP"===u[2])return void(t.transceivers[c]={mid:h,isDatachannel:!0});var v,m,g,w,y,_,b,C,M,T,P,k,S=r.parseRtpParameters(o);f||(P=r.getIceParameters(o,a),k=r.getDtlsParameters(o,a),k.role="client"),C=r.parseRtpEncodingParameters(o);var O,E=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];E&&(O=E.value);var x=r.matchPrefix(o,"a=end-of-candidates",a).length>0,L=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||f)"answer"!==e.type||f||(v=t.transceivers[c],m=v.iceGatherer,g=v.iceTransport,w=v.dtlsTransport,y=v.rtpSender,_=v.rtpReceiver,b=v.sendEncodingParameters,M=v.localCapabilities,t.transceivers[c].recvEncodingParameters=C,t.transceivers[c].remoteCapabilities=S,t.transceivers[c].cname=O,(s||x)&&L.length&&g.setRemoteCandidates(L),t.usingBundle&&0!==c||(g.start(m,P,"controlling"),w.start(k)),t._transceive(v,"sendrecv"===p||"recvonly"===p,"sendrecv"===p||"sendonly"===p),!_||"sendrecv"!==p&&"sendonly"!==p?delete v.rtpReceiver:(T=_.track,i.push([T,_]),n.addTrack(T)));else{var R=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(h,c);if(x&&R.iceTransport.setRemoteCandidates(L),M=RTCRtpReceiver.getCapabilities(d),M.codecs=M.codecs.filter(function(e){return"rtx"!==e.name}),b=[{ssrc:1001*(2*c+2)}],_=new RTCRtpReceiver(R.dtlsTransport,d),T=_.track,i.push([T,_]),n.addTrack(T),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var D;"audio"===d?D=t.localStreams[0].getAudioTracks()[0]:"video"===d&&(D=t.localStreams[0].getVideoTracks()[0]),D&&(y=new RTCRtpSender(D,R.dtlsTransport))}t.transceivers[c]={iceGatherer:R.iceGatherer,iceTransport:R.iceTransport,dtlsTransport:R.dtlsTransport,localCapabilities:M,remoteCapabilities:S,rtpSender:y,rtpReceiver:_,kind:d,mid:h,cname:O,sendEncodingParameters:b,recvEncodingParameters:C},t._transceive(t.transceivers[c],!1,"sendrecv"===p||"sendonly"===p)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),
window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var i=t.track,o=t.kind,a=r.generateIdentifier(),c=e.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(a,n),l=RTCRtpSender.getCapabilities(o);l.codecs=l.codecs.filter(function(e){return"rtx"!==e.name}),l.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var u,d,f=[{ssrc:1001*(2*n+1)}];i&&(u=new RTCRtpSender(i,c.dtlsTransport)),t.wantReceive&&(d=new RTCRtpReceiver(c.dtlsTransport,o)),s[n]={iceGatherer:c.iceGatherer,iceTransport:c.iceTransport,dtlsTransport:c.dtlsTransport,localCapabilities:l,remoteCapabilities:null,rtpSender:u,rtpReceiver:d,kind:o,mid:a,sendEncodingParameters:f,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}else this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};e.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(821)}},821:function(e,t){"use strict";e.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n).catch(function(t){return Promise.reject(e(t))})}}},822:function(e,t,n){"use strict";var r=n(42).browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(r.version<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[i])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;if(RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())},r.version<48){var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}}}};e.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:n(823)}},823:function(e,t,n){"use strict";var r=n(42).log,i=n(42).browserDetails;e.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){o(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){return i.version<44?t(e,n,r):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(n,r))}}},824:function(e,t){"use strict";var n={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.exports={shimGetUserMedia:n.shimGetUserMedia}},827:function(e,t){e.exports={title:"Property Transfer by Owner",html:"<h2>Create a Parcel</h2>\n<p>This is a site for owners to transfer property on the Ethereum blockchain.</p>\n"}},829:function(e,t){e.exports={title:"Property Transfer by Owner",html:"<h2>Transfer a Parcel</h2>\n<p>This is a site for owners to transfer property on the Ethereum blockchain.</p>\n"}}});